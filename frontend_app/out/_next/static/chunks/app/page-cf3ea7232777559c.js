(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{76234:function(e,t,s){Promise.resolve().then(s.bind(s,40991))},40991:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ei}});var o=s(3827),r=s(64090),a=s(28814),l=s(29733),n=s(95032),i=s(10775),c=s(77326),d=s(27815),m=s(1657);let b=r.forwardRef((e,t)=>{let{className:s,defaultValue:a,children:l,...n}=e,[i,c]=r.useState(a);return(0,o.jsx)("div",{ref:t,className:(0,m.cn)("w-full",s),...n,children:r.Children.map(l,e=>r.isValidElement(e)?r.cloneElement(e,{activeTab:i,setActiveTab:c}):e)})});b.displayName="Tabs";let x=r.forwardRef((e,t)=>{let{className:s,children:a,activeTab:l,setActiveTab:n,...i}=e;return(0,o.jsx)("div",{ref:t,className:(0,m.cn)("flex w-full h-14 items-center bg-bloomberg-surface border-b-2 border-bloomberg-orange/30 p-0 gap-1",s),...i,children:r.Children.map(a,e=>r.isValidElement(e)?r.cloneElement(e,{activeTab:l,setActiveTab:n}):e)})});x.displayName="TabsList";let g=r.forwardRef((e,t)=>{let{className:s,value:r,activeTab:a,setActiveTab:l,...n}=e;return(0,o.jsx)("button",{ref:t,className:(0,m.cn)("flex-1 items-center justify-center whitespace-nowrap rounded-none px-6 py-4 text-sm font-bold font-mono uppercase tracking-wider transition-all duration-200 border-b-4 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50",a===r?"bg-bloomberg-surface border-bloomberg-orange text-bloomberg-orange":"bg-transparent border-transparent text-bloomberg-text-dim hover:text-bloomberg-orange hover:bg-bloomberg-surface/50 hover:border-bloomberg-orange/30",s),onClick:()=>null==l?void 0:l(r),...n})});g.displayName="TabsTrigger";let h=r.forwardRef((e,t)=>{let{className:s,value:r,activeTab:a,children:l,...n}=e;return a!==r?null:(0,o.jsx)("div",{ref:t,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n,children:l})});h.displayName="TabsContent";var u=s(26587),f=s(94830),j=s(38333),p=s(23356),N=s(22983),v=s(10166),y=s(43897);function w(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l();let e=setInterval(l,3e5);return()=>clearInterval(e)},[]);let l=async()=>{try{let e=await fetch("/api/data/yield-curve"),s=await e.json(),o=[{maturity:"3M",yield:parseFloat(s["3M"]),order:1},{maturity:"2Y",yield:parseFloat(s["2Y"]),order:2},{maturity:"5Y",yield:parseFloat(s["5Y"]),order:3},{maturity:"10Y",yield:parseFloat(s["10Y"]),order:4},{maturity:"30Y",yield:parseFloat(s["30Y"]),order:5}];t(o),a(!1)}catch(e){console.error("Failed to fetch yield curve:",e),a(!1)}};return s?(0,o.jsx)("div",{className:"flex items-center justify-center h-[300px]",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-bloomberg-orange"})}):(0,o.jsx)(u.h,{width:"100%",height:300,children:(0,o.jsxs)(f.T,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"yieldGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,o.jsx)("stop",{offset:"5%",stopColor:"#ff8c00",stopOpacity:.4}),(0,o.jsx)("stop",{offset:"95%",stopColor:"#ff8c00",stopOpacity:0})]})}),(0,o.jsx)(j.q,{strokeDasharray:"3 3",stroke:"#333333",vertical:!1}),(0,o.jsx)(p.K,{dataKey:"maturity",stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"}}),(0,o.jsx)(N.B,{stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"},tickFormatter:e=>"".concat(e.toFixed(2),"%"),domain:["dataMin - 0.5","dataMax + 0.5"]}),(0,o.jsx)(v.u,{contentStyle:{backgroundColor:"#1a1a1a",border:"2px solid #ff8c00",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 140, 0, 0.3)",padding:"12px",fontFamily:"'Courier New', Monaco, Menlo, monospace",color:"#ffffff"},labelStyle:{fontWeight:700,marginBottom:"4px",color:"#ff8c00"},formatter:e=>["".concat(e.toFixed(2),"%"),"Yield"]}),(0,o.jsx)(y.u,{type:"monotone",dataKey:"yield",stroke:"#ff8c00",strokeWidth:3,fill:"url(#yieldGradient)",animationDuration:1e3,animationEasing:"ease-in-out"})]})})}var _=s(81433),k=s(94688),C=s(78720),S=s(74994);function F(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=await fetch("/api/data/lcr"),s=await e.json(),o=[{name:"HQLA",value:s.hqla/1e9,fill:"#00ff00"},{name:"Outflows",value:-(s.net_outflows-s.hqla)/1e9,fill:"#ff0000"},{name:"Net Cash",value:s.net_outflows/1e9,fill:"#ff8c00"}];t(o),a(!1)}catch(e){console.error("Failed to fetch LCR:",e),a(!1)}};return s?(0,o.jsx)("div",{className:"flex items-center justify-center h-[300px]",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-bloomberg-orange"})}):(0,o.jsx)(u.h,{width:"100%",height:300,children:(0,o.jsxs)(_.v,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[(0,o.jsx)(j.q,{strokeDasharray:"3 3",stroke:"#333333",vertical:!1}),(0,o.jsx)(p.K,{dataKey:"name",stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"}}),(0,o.jsx)(N.B,{stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"},tickFormatter:e=>"$".concat(Math.abs(e).toFixed(1),"B")}),(0,o.jsx)(v.u,{contentStyle:{backgroundColor:"#1a1a1a",border:"2px solid #ff8c00",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 140, 0, 0.3)",padding:"12px",fontFamily:"'Courier New', Monaco, Menlo, monospace",color:"#ffffff"},formatter:e=>["$".concat(Math.abs(e).toFixed(2),"B"),""]}),(0,o.jsx)(k.d,{y:0,stroke:"#333333",strokeWidth:2}),(0,o.jsx)(C.$,{dataKey:"value",radius:[0,0,0,0],animationDuration:1e3,children:e.map((e,t)=>(0,o.jsx)(S.b,{fill:e.fill},"cell-".concat(t)))})]})})}var L=s(4504);function D(e){let{title:t,value:s,change:r,trend:l,icon:n,highlight:i=!1,dataSource:c}=e,d={up:"text-bloomberg-green bloomberg-glow-green",down:"text-bloomberg-red bloomberg-glow-red",neutral:"text-bloomberg-amber"};return(0,o.jsx)(L.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{y:-4,boxShadow:"0 0 20px rgba(255, 140, 0, 0.3)"},children:(0,o.jsxs)("div",{className:"bloomberg-panel rounded-none p-6 transition-all duration-200 relative border-2 ".concat(i?"border-bloomberg-orange":"border-bloomberg-border hover:border-bloomberg-orange/50"),children:[c&&(0,o.jsxs)("div",{className:"group absolute top-3 right-3",children:[(0,o.jsx)(a.Z,{className:"h-4 w-4 text-bloomberg-text-dim cursor-help"}),(0,o.jsx)("div",{className:"absolute top-full right-0 mt-2 hidden group-hover:block z-50 w-72",children:(0,o.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange text-bloomberg-text text-xs p-3 shadow-lg",children:[(0,o.jsx)("div",{className:"font-bold mb-1 text-bloomberg-orange",children:"DATA SOURCE"}),(0,o.jsx)("div",{className:"text-bloomberg-text-dim font-mono text-[10px]",children:c})]})})]}),(0,o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,o.jsx)(L.E.div,{className:"".concat(d[l]),whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:n}),(0,o.jsx)("div",{className:"text-xs font-bold font-mono px-2 py-1 ".concat(d[l]),children:r})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-2 font-mono font-bold tracking-wider",children:t.toUpperCase()}),(0,o.jsx)(L.E.p,{className:"text-3xl font-bold text-bloomberg-orange bloomberg-glow font-mono tabular-nums",initial:{scale:.9},animate:{scale:1},transition:{duration:.2},children:s})]})]})})}var R=s(8792);let E=(0,r.createContext)(void 0);function T(e){let{children:t}=e,[s,a]=(0,r.useState)({view:"dashboard",filters:{},breadcrumbs:[{label:"Dashboard",view:"dashboard",filters:{}}]});return(0,o.jsx)(E.Provider,{value:{state:s,navigateTo:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;a(o=>({view:e,filters:t,breadcrumbs:[...o.breadcrumbs,{label:s,view:e,filters:t}]}))},navigateBack:()=>{a(e=>{if(e.breadcrumbs.length<=1)return e;let t=e.breadcrumbs.slice(0,-1),s=t[t.length-1];return{view:s.view,filters:s.filters,breadcrumbs:t}})},reset:()=>{a({view:"dashboard",filters:{},breadcrumbs:[{label:"Dashboard",view:"dashboard",filters:{}}]})}},children:t})}let A=()=>{let e=(0,r.useContext)(E);if(!e)throw Error("useDrillDown must be used within DrillDownProvider");return e};var M=s(35005),P=s(37805);function B(){let{state:e,navigateBack:t,reset:s}=A();return e.breadcrumbs.length<=1?null:(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-6 text-sm",children:[(0,o.jsx)("button",{onClick:s,className:"flex items-center gap-1 text-slate-600 hover:text-blue-600 transition-colors",children:(0,o.jsx)(M.Z,{className:"h-4 w-4"})}),e.breadcrumbs.map((s,r)=>(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(P.Z,{className:"h-4 w-4 text-slate-400"}),(0,o.jsx)("button",{onClick:()=>{if(r<e.breadcrumbs.length-1)for(let s=0;s<e.breadcrumbs.length-r-1;s++)t()},className:"".concat(r===e.breadcrumbs.length-1?"text-slate-900 font-medium":"text-slate-600 hover:text-blue-600"," transition-colors"),children:s.label})]},r))]})}let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("div",{className:"relative w-full overflow-auto",children:(0,o.jsx)("table",{ref:t,className:"w-full caption-bottom text-sm ".concat(s||""),...r})})});$.displayName="Table";let O=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("thead",{ref:t,className:"[&_tr]:border-b ".concat(s||""),...r})});O.displayName="TableHeader";let Z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("tbody",{ref:t,className:"[&_tr:last-child]:border-0 ".concat(s||""),...r})});Z.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("tfoot",{ref:t,className:"border-t-2 border-bloomberg-orange/30 bg-bloomberg-surface font-medium [&>tr]:last:border-b-0 ".concat(s||""),...r})}).displayName="TableFooter";let U=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("tr",{ref:t,className:"border-b border-bloomberg-border transition-colors hover:bg-bloomberg-surface/80 data-[state=selected]:bg-bloomberg-surface ".concat(s||""),...r})});U.displayName="TableRow";let I=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("th",{ref:t,className:"h-12 px-4 text-left align-middle font-bold text-bloomberg-text [&:has([role=checkbox])]:pr-0 ".concat(s||""),...r})});I.displayName="TableHead";let Y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("td",{ref:t,className:"p-4 align-middle text-bloomberg-text [&:has([role=checkbox])]:pr-0 ".concat(s||""),...r})});function K(e){let{className:t,variant:s="default",...r}=e;return(0,o.jsx)("div",{className:"inline-flex items-center rounded-none border-2 px-2.5 py-0.5 text-xs font-bold font-mono transition-colors focus:outline-none ".concat({default:"border-transparent bg-bloomberg-orange text-black hover:bg-bloomberg-orange/80",secondary:"border-transparent bg-bloomberg-surface text-bloomberg-text hover:bg-bloomberg-surface/80",destructive:"border-transparent bg-bloomberg-red text-white hover:bg-bloomberg-red/80",outline:"text-bloomberg-orange border-bloomberg-orange bg-bloomberg-surface",success:"border-transparent bg-bloomberg-green text-black hover:bg-bloomberg-green/80"}[s]," ").concat(t||""),...r})}Y.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("caption",{ref:t,className:"mt-4 text-sm text-bloomberg-text-dim ".concat(s||""),...r})}).displayName="TableCaption";var z=s(37211);function H(e){let{filters:t={},onLoanClick:s,type:a="loans"}=e,[l,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),{navigateTo:d}=A();(0,r.useEffect)(()=>{let e=new URLSearchParams;t.product_type&&e.append("product_type",t.product_type),t.days&&e.append("days",t.days.toString()),c(!0);let s="loans"===a?"loans":"deposits";fetch("http://localhost:8000/api/data/".concat(s,"?").concat(e)).then(e=>e.json()).then(e=>{n(e[a]||[]),c(!1)}).catch(e=>{console.error("Error loading ".concat(a,":"),e),c(!1)})},[t,a]);let m=e=>{"loans"===a&&s&&s(e.loan_id)},b=e=>({Current:"bg-bloomberg-surface text-bloomberg-green border-2 border-bloomberg-green",Past_Due_30:"bg-bloomberg-surface text-bloomberg-amber border-2 border-bloomberg-amber",Past_Due_60:"bg-bloomberg-surface text-bloomberg-orange border-2 border-bloomberg-orange",Past_Due_90:"bg-bloomberg-surface text-bloomberg-red border-2 border-bloomberg-red",Default:"bg-bloomberg-surface text-bloomberg-red border-2 border-bloomberg-red"})[e]||"bg-bloomberg-surface text-bloomberg-text-dim border-2 border-bloomberg-border";return i?(0,o.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,o.jsx)("div",{className:"h-12 bg-bloomberg-surface rounded-none"}),(0,o.jsx)("div",{className:"h-96 bg-bloomberg-surface rounded-none"})]}):(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between bg-bloomberg-surface rounded-none border-2 border-bloomberg-border p-4 hover:border-bloomberg-orange/50 transition-colors",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-sm text-bloomberg-text-dim",children:[(0,o.jsx)(z.Z,{className:"h-4 w-4"}),(0,o.jsxs)("span",{className:"font-bold font-mono",children:[l.length.toLocaleString()," ","loans"===a?"LOANS":"DEPOSITS"]}),t.product_type&&(0,o.jsx)(K,{variant:"outline",className:"bg-bloomberg-surface border-bloomberg-orange text-bloomberg-orange font-mono",children:t.product_type})]}),(0,o.jsx)("div",{className:"flex gap-2",children:("loans"===a?["C&I","Commercial_RE","Residential_Mortgage","Consumer_Auto"]:["Checking","Savings","Money_Market","CD"]).map(e=>(0,o.jsx)("button",{onClick:()=>{d("loans"===a?"loan-table":"deposit-table",{product_type:e},"".concat(e," ").concat("loans"===a?"Loans":"Deposits"))},className:"text-xs px-3 py-1.5 rounded-none border-2 transition-colors font-mono font-bold ".concat(t.product_type===e?"bg-bloomberg-orange text-black border-bloomberg-orange":"bg-bloomberg-surface text-bloomberg-text border-bloomberg-border hover:border-bloomberg-orange hover:text-bloomberg-orange"),children:e.replace("_"," ")},e))})]}),(0,o.jsx)("div",{className:"border-2 border-bloomberg-border rounded-none overflow-hidden bg-bloomberg-surface shadow-xl",children:(0,o.jsxs)($,{children:[(0,o.jsx)(O,{children:(0,o.jsxs)(U,{className:"bg-bloomberg-surface border-b-2 border-bloomberg-orange/30",children:[(0,o.jsx)(I,{className:"text-bloomberg-orange font-mono font-bold",children:"Loan ID"}),(0,o.jsx)(I,{className:"text-bloomberg-orange font-mono font-bold",children:"Borrower"}),(0,o.jsx)(I,{className:"text-bloomberg-orange font-mono font-bold",children:"Product"}),(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Balance"}),(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Rate"}),(0,o.jsx)(I,{className:"text-bloomberg-orange font-mono font-bold",children:"Status"}),(0,o.jsx)(I,{className:"text-bloomberg-orange font-mono font-bold",children:"Originated"}),(0,o.jsx)(I,{})]})}),(0,o.jsx)(Z,{children:0===l.length?(0,o.jsx)(U,{children:(0,o.jsx)(Y,{colSpan:8,className:"text-center text-bloomberg-text-dim py-8 font-mono",children:"No loans found"})}):l.map(e=>(0,o.jsxs)(U,{onClick:()=>m(e),className:"".concat("loans"===a?"cursor-pointer":""," hover:bg-bloomberg-surface/80 hover:border-bloomberg-orange/50 transition-colors border-b border-bloomberg-border group"),children:[(0,o.jsx)(Y,{className:"font-mono text-sm text-bloomberg-text",children:e.loan_id}),(0,o.jsx)(Y,{className:"text-bloomberg-text font-mono",children:e.borrower_name}),(0,o.jsx)(Y,{children:(0,o.jsx)(K,{variant:"outline",className:"text-xs bg-bloomberg-surface border-bloomberg-orange/50 text-bloomberg-orange font-mono",onClick:e=>e.stopPropagation(),children:e.product_type})}),(0,o.jsxs)(Y,{className:"text-right font-bold text-bloomberg-green bloomberg-glow-green font-mono tabular-nums",children:["$",(e.current_balance/1e6).toFixed(2),"M"]}),(0,o.jsxs)(Y,{className:"text-right text-bloomberg-amber font-mono tabular-nums",children:[e.interest_rate.toFixed(2),"%"]}),(0,o.jsx)(Y,{children:(0,o.jsx)(K,{className:"".concat(b(e.payment_status)," font-mono text-xs"),children:e.payment_status})}),(0,o.jsx)(Y,{className:"text-bloomberg-text-dim font-mono",children:new Date(e.origination_date).toLocaleDateString()}),(0,o.jsx)(Y,{children:"loans"===a&&(0,o.jsx)(P.Z,{className:"h-4 w-4 text-bloomberg-text-dim group-hover:text-bloomberg-orange transition-colors"})})]},e.loan_id))})]})})]})}var V=s(69475),G=s(52235),W=s(98998);function q(e){let{open:t,onOpenChange:s,children:r}=e;return t?(0,o.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>s(!1)}),(0,o.jsx)("div",{className:"relative z-50",children:r})]}):null}function Q(e){let{className:t,children:s,...r}=e;return(0,o.jsx)("div",{className:"relative bg-white rounded-lg shadow-lg p-6 w-full ".concat(t||""),...r,children:s})}function X(e){let{className:t,children:s,...r}=e;return(0,o.jsx)("div",{className:"flex flex-col space-y-1.5 mb-4 ".concat(t||""),...r,children:s})}function J(e){let{className:t,children:s,...r}=e;return(0,o.jsx)("h2",{className:"text-lg font-semibold leading-none tracking-tight ".concat(t||""),...r,children:s})}function ee(e){let{loanId:t,open:s,onClose:a}=e,[l,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{s&&t&&(c(!0),fetch("http://localhost:8000/api/data/loan-detail/".concat(t)).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{n(e),c(!1)}).catch(e=>{console.error("Error loading loan:",e),n(null),c(!1),a()}))},[t,s]),l||i)?(0,o.jsx)(q,{open:s,onOpenChange:a,children:(0,o.jsxs)(Q,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,o.jsx)(X,{children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)(J,{className:"text-2xl font-semibold flex items-center gap-3",children:[(0,o.jsx)(V.Z,{className:"h-6 w-6 text-blue-600"}),"Loan Detail: ",t]}),(0,o.jsx)("button",{onClick:a,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,o.jsx)(G.Z,{className:"h-5 w-5"})})]})}),i?(0,o.jsxs)("div",{className:"space-y-4 animate-pulse",children:[(0,o.jsx)("div",{className:"h-20 bg-slate-200 rounded"}),(0,o.jsx)("div",{className:"h-40 bg-slate-200 rounded"})]}):l?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-slate-600 mb-1",children:"Current Balance"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:["$",((l.current_balance||0)/1e6).toFixed(2),"M"]}),(0,o.jsxs)("p",{className:"text-xs text-slate-600 mt-1",children:["Orig: $",((l.original_amount||0)/1e6).toFixed(2),"M"]})]}),(0,o.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-slate-600 mb-1",children:"Interest Rate"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[(l.interest_rate||0).toFixed(2),"%"]}),(0,o.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:l.product_type})]}),(0,o.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-slate-600 mb-1",children:"Payment Status"}),(0,o.jsx)(K,{className:{Current:"bg-green-100 text-green-800 border-green-200",Past_Due_30:"bg-yellow-100 text-yellow-800 border-yellow-200",Past_Due_60:"bg-orange-100 text-orange-800 border-orange-200",Past_Due_90:"bg-red-100 text-red-800 border-red-200",Default:"bg-red-200 text-red-900 border-red-300"}[l.payment_status]||"bg-slate-100 text-slate-800",children:l.payment_status}),(l.days_past_due||0)>0&&(0,o.jsxs)("p",{className:"text-xs text-red-600 mt-2",children:[l.days_past_due," days past due"]})]}),(0,o.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[(0,o.jsx)("p",{className:"text-xs text-slate-600 mb-1",children:"CECL Reserve"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:["$",((l.cecl_reserve||0)/1e3).toFixed(0),"K"]}),(0,o.jsxs)("p",{className:"text-xs text-slate-600 mt-1",children:[((l.cecl_reserve||0)/(l.current_balance||1)*100).toFixed(2),"% of balance"]})]})]}),(0,o.jsxs)(b,{defaultValue:"overview",className:"w-full",children:[(0,o.jsxs)(x,{className:"grid grid-cols-4 w-full",children:[(0,o.jsx)(g,{value:"overview",children:"Overview"}),(0,o.jsx)(g,{value:"risk",children:"Risk Profile"}),(0,o.jsx)(g,{value:"accounting",children:"Accounting"}),(0,o.jsx)(g,{value:"history",children:"History"})]}),(0,o.jsxs)(h,{value:"overview",className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900 mb-3",children:"Borrower Information"}),(0,o.jsxs)("dl",{className:"space-y-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("dt",{className:"text-slate-600",children:"Name:"}),(0,o.jsx)("dd",{className:"font-medium",children:l.borrower_name})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("dt",{className:"text-slate-600",children:"Relationship Officer:"}),(0,o.jsx)("dd",{className:"font-medium font-mono",children:l.officer_id})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("dt",{className:"text-slate-600",children:"Branch:"}),(0,o.jsx)("dd",{className:"font-medium font-mono",children:l.branch_id})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900 mb-3",children:"Loan Terms"}),(0,o.jsxs)("dl",{className:"space-y-2 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("dt",{className:"text-slate-600",children:"Origination:"}),(0,o.jsx)("dd",{className:"font-medium",children:new Date(l.origination_date).toLocaleDateString()})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("dt",{className:"text-slate-600",children:"Maturity:"}),(0,o.jsx)("dd",{className:"font-medium",children:new Date(l.maturity_date).toLocaleDateString()})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("dt",{className:"text-slate-600",children:"Original Amount:"}),(0,o.jsxs)("dd",{className:"font-medium",children:["$",(l.original_amount/1e6).toFixed(2),"M"]})]})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900 mb-3",children:"Collateral"}),(0,o.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"Type"}),(0,o.jsx)("p",{className:"font-medium",children:l.collateral_type})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"Value"}),(0,o.jsxs)("p",{className:"font-medium",children:["$",(l.collateral_value/1e6).toFixed(2),"M"]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"LTV Ratio"}),(0,o.jsxs)("p",{className:"font-medium",children:[(100*l.ltv_ratio).toFixed(1),"%"]})]})]})})]})]}),(0,o.jsx)(h,{value:"risk",className:"space-y-4",children:(0,o.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6",children:[(0,o.jsxs)("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,o.jsx)(W.Z,{className:"h-5 w-5 text-amber-500"}),"CECL Risk Parameters"]}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Probability of Default (PD)"}),(0,o.jsx)("div",{className:"flex items-baseline gap-2",children:(0,o.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[(100*(l.pd||0)).toFixed(2),"%"]})}),(0,o.jsx)("div",{className:"mt-2 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,o.jsx)("div",{className:"h-full bg-amber-500",style:{width:"".concat(100*l.pd,"%")}})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Loss Given Default (LGD)"}),(0,o.jsx)("div",{className:"flex items-baseline gap-2",children:(0,o.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[(100*(l.lgd||0)).toFixed(1),"%"]})}),(0,o.jsx)("div",{className:"mt-2 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,o.jsx)("div",{className:"h-full bg-red-500",style:{width:"".concat(100*l.lgd,"%")}})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"CECL Reserve"}),(0,o.jsx)("div",{className:"flex items-baseline gap-2",children:(0,o.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:["$",((l.cecl_reserve||0)/1e3).toFixed(0),"K"]})}),(0,o.jsxs)("p",{className:"text-xs text-slate-600 mt-2",children:[((l.cecl_reserve||0)/(l.current_balance||1)*100).toFixed(3),"% of balance"]})]})]}),(0,o.jsxs)("div",{className:"mt-6 pt-4 border-t border-slate-300",children:[(0,o.jsxs)("p",{className:"text-xs text-slate-600",children:[(0,o.jsx)("strong",{children:"Formula:"})," CECL Reserve = EAD \xd7 PD \xd7 LGD"]}),(0,o.jsxs)("p",{className:"text-xs text-slate-600 mt-1",children:["= $",((l.current_balance||0)/1e6).toFixed(2),"M \xd7 ",(100*(l.pd||0)).toFixed(2),"% \xd7 ",(100*(l.lgd||0)).toFixed(1),"% = $",((l.cecl_reserve||0)/1e3).toFixed(0),"K"]})]})]})}),(0,o.jsxs)(h,{value:"accounting",className:"space-y-4",children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900 mb-3",children:"GL Entries for This Loan"}),l.gl_entries&&l.gl_entries.length>0?(0,o.jsx)("div",{className:"space-y-2",children:l.gl_entries.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-mono text-sm font-medium",children:e.entry_id}),(0,o.jsx)("p",{className:"text-xs text-slate-600",children:new Date(e.entry_date).toLocaleDateString()})]}),(0,o.jsx)(K,{variant:e.is_balanced?"success":"destructive",children:e.is_balanced?"Balanced":"Unbalanced"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-slate-600",children:"Total Debits:"}),(0,o.jsxs)("p",{className:"font-medium",children:["$",(e.total_debits/1e6).toFixed(2),"M"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-slate-600",children:"Total Credits:"}),(0,o.jsxs)("p",{className:"font-medium",children:["$",(e.total_credits/1e6).toFixed(2),"M"]})]})]}),(0,o.jsx)("p",{className:"text-xs text-slate-600 mt-3",children:e.description})]},t))}):(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"No GL entries found"}),(0,o.jsx)("h3",{className:"font-semibold text-slate-900 mb-3 mt-6",children:"Subledger Transactions"}),l.subledger_entries&&l.subledger_entries.length>0?(0,o.jsx)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:(0,o.jsxs)("table",{className:"w-full text-sm",children:[(0,o.jsx)("thead",{className:"bg-slate-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"text-left p-3 font-medium",children:"Date"}),(0,o.jsx)("th",{className:"text-left p-3 font-medium",children:"Type"}),(0,o.jsx)("th",{className:"text-right p-3 font-medium",children:"Principal"}),(0,o.jsx)("th",{className:"text-right p-3 font-medium",children:"Interest"}),(0,o.jsx)("th",{className:"text-right p-3 font-medium",children:"Balance After"})]})}),(0,o.jsx)("tbody",{children:l.subledger_entries.map((e,t)=>(0,o.jsxs)("tr",{className:"border-t border-slate-100 hover:bg-slate-50",children:[(0,o.jsx)("td",{className:"p-3",children:new Date(e.posting_date).toLocaleDateString()}),(0,o.jsx)("td",{className:"p-3",children:(0,o.jsx)(K,{variant:"outline",className:"text-xs",children:e.transaction_type})}),(0,o.jsxs)("td",{className:"p-3 text-right font-mono",children:["$",((e.principal_amount||0)/1e3).toFixed(1),"K"]}),(0,o.jsxs)("td",{className:"p-3 text-right font-mono",children:["$",((e.interest_amount||0)/1e3).toFixed(1),"K"]}),(0,o.jsxs)("td",{className:"p-3 text-right font-mono font-medium",children:["$",((e.balance_after||0)/1e6).toFixed(2),"M"]})]},t))})]})}):(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"No subledger entries found"})]}),(0,o.jsxs)(h,{value:"history",className:"space-y-4",children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900 mb-3",children:"Payment History"}),(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"Payment history visualization would go here"})]})]})]}):null]})}):null}var et=s(48219);function es(e){let{type:t}=e,[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),{navigateTo:c}=A();(0,r.useEffect)(()=>{d()},[t]);let d=async()=>{try{i(!0);let e=await fetch("/api/data/portfolio-breakdown"),s=await e.json();if(s.success){let e=("loans"===t?s.loans:s.deposits).map(e=>({product_type:e[0],count:parseInt(e[1]),balance_billions:parseFloat(e[2]),avg_rate:parseFloat(e[3]),reserve_pct:e[4]?parseFloat(e[4]):void 0}));a(e)}i(!1)}catch(e){console.error("Failed to fetch portfolio data:",e),i(!1)}},m=e=>{"loans"===t?c("loan-table",{product_type:e.product_type},"".concat(e.product_type," Loans")):c("deposit-table",{product_type:e.product_type},"".concat(e.product_type," Deposits"))};if(n)return(0,o.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,o.jsx)("div",{className:"h-12 bg-bloomberg-surface rounded-none"}),(0,o.jsx)("div",{className:"h-96 bg-bloomberg-surface rounded-none"})]});let b=s.reduce((e,t)=>e+t.balance_billions,0),x=s.reduce((e,t)=>e+t.count,0);return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"bg-bloomberg-surface border-2 border-bloomberg-border rounded-none p-6 hover:border-bloomberg-orange/50 transition-colors",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-bloomberg-text-dim mb-3",children:[(0,o.jsx)(et.Z,{className:"h-5 w-5"}),(0,o.jsx)("p",{className:"text-xs font-mono font-bold tracking-wider uppercase",children:"Total Balance"})]}),(0,o.jsxs)("p",{className:"text-3xl font-bold text-bloomberg-orange bloomberg-glow font-mono tabular-nums",children:["$",b.toFixed(2),"B"]})]}),(0,o.jsxs)("div",{className:"bg-bloomberg-surface border-2 border-bloomberg-border rounded-none p-6 hover:border-bloomberg-orange/50 transition-colors",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-bloomberg-text-dim mb-3",children:[(0,o.jsx)(l.Z,{className:"h-5 w-5"}),(0,o.jsxs)("p",{className:"text-xs font-mono font-bold tracking-wider uppercase",children:["Total ","loans"===t?"Loans":"Accounts"]})]}),(0,o.jsx)("p",{className:"text-3xl font-bold text-bloomberg-green bloomberg-glow-green font-mono tabular-nums",children:x.toLocaleString()})]}),(0,o.jsxs)("div",{className:"bg-bloomberg-surface border-2 border-bloomberg-border rounded-none p-6 hover:border-bloomberg-orange/50 transition-colors",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-bloomberg-text-dim mb-3",children:[(0,o.jsx)(l.Z,{className:"h-5 w-5"}),(0,o.jsx)("p",{className:"text-xs font-mono font-bold tracking-wider uppercase",children:"Product Types"})]}),(0,o.jsx)("p",{className:"text-3xl font-bold text-bloomberg-amber font-mono tabular-nums",children:s.length})]})]}),(0,o.jsxs)("div",{className:"border-2 border-bloomberg-border rounded-none overflow-hidden bg-bloomberg-surface shadow-xl",children:[(0,o.jsxs)("div",{className:"bg-bloomberg-surface px-6 py-4 border-b-2 border-bloomberg-orange/30",children:[(0,o.jsxs)("h3",{className:"text-lg font-bold text-bloomberg-orange font-mono uppercase tracking-wider",children:["loans"===t?"Loan":"Deposit"," Portfolio Breakdown"]}),(0,o.jsxs)("p",{className:"text-sm text-bloomberg-text-dim mt-1 font-mono",children:["Click any row to view detailed ",t," list"]})]}),(0,o.jsxs)($,{children:[(0,o.jsx)(O,{children:(0,o.jsxs)(U,{className:"bg-bloomberg-surface border-b-2 border-bloomberg-orange/30",children:[(0,o.jsx)(I,{className:"text-bloomberg-orange font-mono font-bold",children:"Product Type"}),(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Count"}),(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Balance"}),(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Avg Rate"}),"loans"===t&&(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Reserve %"}),(0,o.jsx)(I,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"% of Total"}),(0,o.jsx)(I,{})]})}),(0,o.jsx)(Z,{children:s.map((e,s)=>{var r;let a=e.balance_billions/b*100;return(0,o.jsxs)(U,{onClick:()=>m(e),className:"cursor-pointer hover:bg-bloomberg-surface/80 hover:border-bloomberg-orange/50 transition-colors border-b border-bloomberg-border group",children:[(0,o.jsx)(Y,{children:(0,o.jsx)("div",{className:"flex items-center gap-2",children:(0,o.jsx)(K,{variant:"outline",className:"text-xs bg-bloomberg-surface border-bloomberg-orange/50 text-bloomberg-orange font-mono",children:e.product_type})})}),(0,o.jsx)(Y,{className:"text-right font-bold text-bloomberg-text font-mono tabular-nums",children:e.count.toLocaleString()}),(0,o.jsxs)(Y,{className:"text-right font-bold text-bloomberg-green bloomberg-glow-green font-mono tabular-nums",children:["$",e.balance_billions.toFixed(2),"B"]}),(0,o.jsxs)(Y,{className:"text-right text-bloomberg-amber font-mono tabular-nums",children:[e.avg_rate.toFixed(2),"%"]}),"loans"===t&&(0,o.jsx)(Y,{className:"text-right",children:(0,o.jsxs)(K,{className:"bg-bloomberg-surface border-2 border-bloomberg-amber text-bloomberg-amber font-mono",children:[null===(r=e.reserve_pct)||void 0===r?void 0:r.toFixed(2),"%"]})}),(0,o.jsx)(Y,{className:"text-right",children:(0,o.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,o.jsx)("div",{className:"w-16 h-2 bg-bloomberg-border rounded-none overflow-hidden",children:(0,o.jsx)("div",{className:"h-full bg-bloomberg-orange rounded-none",style:{width:"".concat(a,"%")}})}),(0,o.jsxs)("span",{className:"text-sm text-bloomberg-text-dim font-mono tabular-nums w-12",children:[a.toFixed(1),"%"]})]})}),(0,o.jsx)(Y,{children:(0,o.jsx)(P.Z,{className:"h-4 w-4 text-bloomberg-text-dim group-hover:text-bloomberg-orange transition-colors"})})]},s)})})]})]})]})}function eo(e){let{source:t}=e;return(0,o.jsxs)("div",{className:"group relative inline-block ml-2",children:[(0,o.jsx)(a.Z,{className:"h-4 w-4 text-slate-400 cursor-help"}),(0,o.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 w-64",children:(0,o.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg p-3 shadow-lg",children:[(0,o.jsx)("div",{className:"font-medium mb-1",children:"Data Source"}),(0,o.jsx)("div",{className:"text-slate-300",children:t}),(0,o.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1",children:(0,o.jsx)("div",{className:"border-4 border-transparent border-t-slate-900"})})]})})]})}function er(e){let{type:t}=e,[s,a]=(0,r.useState)([]),[l,n]=(0,r.useState)(!0),{navigateTo:i}=A();(0,r.useEffect)(()=>{c()},[t]);let c=async()=>{try{let e=await fetch("/api/data/portfolio-breakdown"),s=await e.json();s.success&&a("loans"===t?s.loans:s.deposits),n(!1)}catch(e){console.error("Failed to fetch portfolio data:",e),n(!1)}};return l?(0,o.jsx)("div",{className:"text-sm text-slate-600",children:"Loading..."}):(0,o.jsx)("div",{className:"space-y-3",children:s.map((e,s)=>(0,o.jsxs)("div",{onClick:()=>{let s=e[0];i("loans"===t?"loan-table":"deposit-table",{product_type:s},"".concat(s," ").concat("loans"===t?"Loans":"Deposits"))},className:"flex items-center justify-between p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e[0]}),(0,o.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:[Number(e[1]).toLocaleString()," accounts"]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:["$",Number(e[2]).toFixed(2),"B"]}),(0,o.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:[Number(e[3]).toFixed(2),"% avg rate"]})]})]},s))})}function ea(){var e,t,s,a,l,n,i,c;let[d,m]=(0,r.useState)(null),[b,x]=(0,r.useState)(!0),{navigateTo:g}=A();(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/data/risk-metrics"),t=await e.json();t.success&&m(t),x(!1)}catch(e){console.error("Failed to fetch risk metrics:",e),x(!1)}};return b?(0,o.jsx)("div",{className:"text-sm text-slate-600",children:"Loading risk metrics..."}):d?(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900",children:"Credit Risk by Product"}),(0,o.jsx)("div",{className:"space-y-3",children:null===(e=d.credit_risk)||void 0===e?void 0:e.map((e,t)=>(0,o.jsxs)("div",{onClick:()=>{g("loan-table",{product_type:e[0]},"".concat(e[0]," Loans - Risk View"))},className:"p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e[0]}),(0,o.jsxs)("div",{className:"text-lg font-bold text-bloomberg-text font-mono",children:["$",Number(e[1]).toFixed(2),"B"]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-bloomberg-text-dim font-mono",children:[(0,o.jsxs)("div",{children:["NPL: ",(0,o.jsxs)("span",{className:"text-bloomberg-red font-bold",children:[Number(e[2]).toFixed(2),"%"]})]}),(0,o.jsxs)("div",{children:["RSV: ",(0,o.jsxs)("span",{className:"text-bloomberg-amber",children:["$",Number(e[3]).toFixed(2),"B"]})]}),(0,o.jsxs)("div",{className:"col-span-2",children:["Ratio: ",(0,o.jsxs)("span",{className:"text-bloomberg-text",children:[Number(e[4]).toFixed(2),"%"]})]})]})]},t))})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"font-semibold text-slate-900",children:"Rate Shock Stress (100 bps)"}),(0,o.jsx)("div",{className:"space-y-3",children:null===(t=d.rate_shock_stress)||void 0===t?void 0:t.map((e,t)=>(0,o.jsxs)("div",{className:"p-4 border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsx)("div",{className:"font-bold text-bloomberg-orange font-mono text-sm",children:e.product}),(0,o.jsxs)("div",{className:"text-sm text-bloomberg-red font-bold font-mono bloomberg-glow-red",children:["-$",(e.runoff_100bps/1e6).toFixed(1),"M"]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-bloomberg-text-dim font-mono",children:[(0,o.jsxs)("div",{children:["BETA: ",(0,o.jsx)("span",{className:"text-bloomberg-text",children:e.beta.toFixed(4)})]}),(0,o.jsxs)("div",{children:["RUN: ",(0,o.jsxs)("span",{className:"text-bloomberg-red",children:[e.runoff_pct.toFixed(2),"%"]})]})]})]},t))}),(0,o.jsxs)("div",{className:"p-4 bg-bloomberg-surface border-2 border-bloomberg-border mt-4",children:[(0,o.jsx)("h4",{className:"font-bold text-bloomberg-orange mb-3 font-mono text-sm tracking-wider",children:"LCR STRESS TEST"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"BASE CASE"}),(0,o.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:[null===(s=d.lcr_stress)||void 0===s?void 0:s.base.ratio.toFixed(2),"%"]}),(0,o.jsx)("div",{className:"text-xs font-bold font-mono mt-1 ".concat((null===(a=d.lcr_stress)||void 0===a?void 0:a.base.status)==="Pass"?"text-bloomberg-green bloomberg-glow-green":"text-bloomberg-red bloomberg-glow-red"),children:null===(l=d.lcr_stress)||void 0===l?void 0:l.base.status})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"1.5X STRESS"}),(0,o.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:[null===(n=d.lcr_stress)||void 0===n?void 0:n.stressed.ratio.toFixed(2),"%"]}),(0,o.jsx)("div",{className:"text-xs font-bold font-mono mt-1 ".concat((null===(i=d.lcr_stress)||void 0===i?void 0:i.stressed.status)==="Pass"?"text-bloomberg-green bloomberg-glow-green":"text-bloomberg-red bloomberg-glow-red"),children:null===(c=d.lcr_stress)||void 0===c?void 0:c.stressed.status})]})]})]})]})]}):(0,o.jsx)("div",{className:"text-sm text-slate-600",children:"No risk data available"})}function el(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),{navigateTo:l}=A();(0,r.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/data/recent-activity"),s=await e.json();s.success&&t(s.activities||[]),a(!1)}catch(e){console.error("Failed to fetch activity:",e),a(!1)}};return s?(0,o.jsx)("div",{className:"text-sm text-slate-600",children:"Loading recent activity..."}):(0,o.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,o.jsxs)("div",{onClick:()=>{l("loan-table",{product_type:e[1]},"".concat(e[1]," Loans"))},className:"flex items-center justify-between p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,o.jsx)("div",{className:"flex items-center gap-4",children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e[0]}),(0,o.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:e[1]})]})}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:["$",(Number(e[2])/1e3).toFixed(1),"K"]}),(0,o.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:new Date(e[3]).toLocaleDateString()})]})]},t))})}function en(){let[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),{state:f,navigateTo:j}=A();(0,r.useEffect)(()=>{p();let e=setInterval(p,6e4);return()=>clearInterval(e)},[]);let p=async()=>{try{let e=await fetch("/api/data/summary"),s=await e.json();t(s),a(!1)}catch(e){console.error("Failed to fetch summary:",e),a(!1)}};return(0,o.jsxs)("div",{className:"min-h-screen bg-bloomberg-bg",children:[(0,o.jsx)("header",{className:"bloomberg-header sticky top-0 z-50",children:(0,o.jsx)("div",{className:"container mx-auto px-6 py-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-bloomberg-orange bloomberg-glow tracking-wide",children:"BANK CFO COMMAND CENTER"}),(0,o.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:"POWERED BY DATABRICKS LAKEHOUSE | REAL-TIME ANALYTICS"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-6",children:[(0,o.jsx)(R.default,{href:"/assistant",className:"text-sm font-bold text-bloomberg-amber hover:text-bloomberg-orange transition-colors tracking-wide",children:"AI ASSISTANT →"}),(0,o.jsxs)("div",{className:"flex items-center gap-3 text-xs font-mono text-bloomberg-text-dim",children:[(0,o.jsx)("span",{children:new Date().toLocaleTimeString()}),(0,o.jsx)("div",{className:"h-2 w-2 rounded-full bg-bloomberg-green animate-pulse bloomberg-glow-green"}),(0,o.jsx)("span",{className:"text-bloomberg-green font-bold",children:"LIVE"})]})]})]})})}),(0,o.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[(0,o.jsx)(B,{}),"loan-table"===f.view?(0,o.jsx)(H,{type:"loans",filters:f.filters,onLoanClick:e=>u(e)}):"deposit-table"===f.view?(0,o.jsx)(H,{type:"deposits",filters:f.filters,onLoanClick:e=>u(e)}):"portfolio-loans"===f.view?(0,o.jsx)(es,{type:"loans"}):"portfolio-deposits"===f.view?(0,o.jsx)(es,{type:"deposits"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[(0,o.jsx)("div",{onClick:()=>j("loan-table",{},"All Loans"),className:"cursor-pointer",children:(0,o.jsx)(D,{title:"Total Assets",value:(null==e?void 0:e.success)?"$".concat((e.total_assets/1e9).toFixed(1),"B"):"Loading...",change:"+2.1%",trend:"up",icon:(0,o.jsx)(l.Z,{className:"h-5 w-5"}),dataSource:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio (SUM current_balance) + silver_finance.securities (SUM market_value) → agent_tools.get_portfolio_summary()"})}),(0,o.jsx)("div",{onClick:()=>j("loan-table",{},"All Deposits"),className:"cursor-pointer",children:(0,o.jsx)(D,{title:"Total Deposits",value:(null==e?void 0:e.success)?"$".concat((e.deposits/1e9).toFixed(1),"B"):"Loading...",change:"+1.8%",trend:"up",icon:(0,o.jsx)(n.Z,{className:"h-5 w-5"}),dataSource:"Unity Catalog: cfo_banking_demo.bronze_core_banking.deposit_accounts WHERE account_status = 'Active' (SUM current_balance) → agent_tools.get_portfolio_summary()"})}),(0,o.jsx)("div",{onClick:()=>j("loan-table",{},"All Loans"),className:"cursor-pointer",children:(0,o.jsx)(D,{title:"Loans",value:(null==e?void 0:e.success)?"$".concat((e.loans/1e9).toFixed(1),"B"):"Loading...",change:"-12 bps",trend:"down",icon:(0,o.jsx)(i.Z,{className:"h-5 w-5"}),dataSource:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio WHERE is_current = true (SUM current_balance) → agent_tools.get_portfolio_summary()"})}),(0,o.jsx)("div",{onClick:()=>j("loan-table",{},"All Securities"),className:"cursor-pointer",children:(0,o.jsx)(D,{title:"Securities",value:(null==e?void 0:e.success)?"$".concat((e.securities/1e9).toFixed(1),"B"):"Loading...",change:"Compliant",trend:"neutral",icon:(0,o.jsx)(c.Z,{className:"h-5 w-5"}),highlight:!0,dataSource:"Unity Catalog: cfo_banking_demo.silver_finance.securities (SUM market_value) → HQLA eligible securities for regulatory compliance → agent_tools.get_portfolio_summary()"})})]}),(0,o.jsxs)(b,{defaultValue:"portfolio",className:"space-y-6 mb-8",children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(g,{value:"portfolio",children:"Portfolio"}),(0,o.jsx)(g,{value:"risk",children:"Risk Analysis"}),(0,o.jsx)(g,{value:"activity",children:"Recent Activity"})]}),(0,o.jsx)(h,{value:"portfolio",className:"space-y-6",children:(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,o.jsxs)(d.Zb,{children:[(0,o.jsx)(d.Ol,{children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.ll,{children:"Loan Portfolio by Product"}),(0,o.jsx)(eo,{source:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio → Aggregated by product_type with current_balance, interest_rate, and cecl_reserve"})]})}),(0,o.jsx)(d.aY,{children:(0,o.jsx)(er,{type:"loans"})})]}),(0,o.jsxs)(d.Zb,{children:[(0,o.jsx)(d.Ol,{children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.ll,{children:"Deposit Portfolio by Product"}),(0,o.jsx)(eo,{source:"Unity Catalog: cfo_banking_demo.bronze_core_banking.deposit_accounts → Aggregated by product_type with current_balance and stated_rate"})]})}),(0,o.jsx)(d.aY,{children:(0,o.jsx)(er,{type:"deposits"})})]})]})}),(0,o.jsx)(h,{value:"risk",className:"space-y-6",children:(0,o.jsxs)(d.Zb,{children:[(0,o.jsxs)(d.Ol,{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.ll,{children:"Risk Analytics & Stress Testing"}),(0,o.jsx)(eo,{source:"Credit Risk: cfo_banking_demo.silver_finance.loan_portfolio (NPL rates, CECL reserves) | Rate Shock: agent_tools.call_deposit_beta_model() with 100 bps stress | LCR: agent_tools.calculate_lcr() with 1.0x and 1.5x multipliers"})]}),(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"Credit risk metrics and rate shock scenarios"})]}),(0,o.jsx)(d.aY,{children:(0,o.jsx)(ea,{})})]})}),(0,o.jsx)(h,{value:"activity",className:"space-y-6",children:(0,o.jsxs)(d.Zb,{children:[(0,o.jsxs)(d.Ol,{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.ll,{children:"Recent Activity"}),(0,o.jsx)(eo,{source:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio → Last 10 loan originations ordered by origination_date DESC"})]}),(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"Latest loan originations and transactions"})]}),(0,o.jsx)(d.aY,{children:(0,o.jsx)(el,{})})]})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,o.jsxs)(d.Zb,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[(0,o.jsxs)(d.Ol,{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.ll,{className:"text-lg font-semibold text-slate-900",children:"US Treasury Yield Curve"}),(0,o.jsx)(eo,{source:"Alpha Vantage API → agent_tools.get_current_treasury_yields() → U.S. Department of Treasury daily rates"})]}),(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"Live market data"})]}),(0,o.jsx)(d.aY,{children:(0,o.jsx)(w,{})})]}),(0,o.jsxs)(d.Zb,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[(0,o.jsxs)(d.Ol,{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.ll,{className:"text-lg font-semibold text-slate-900",children:"30-Day Liquidity Analysis"}),(0,o.jsx)(eo,{source:"Unity Catalog: cfo_banking_demo.bronze_core_banking.deposit_accounts + silver_finance.securities → agent_tools.calculate_lcr()"})]}),(0,o.jsx)("p",{className:"text-sm text-slate-600",children:"LCR components"})]}),(0,o.jsx)(d.aY,{children:(0,o.jsx)(F,{})})]})]})]}),m&&(0,o.jsx)(ee,{loanId:m,open:!!m,onClose:()=>u(null)})]})]})}function ei(){return(0,o.jsx)(T,{children:(0,o.jsx)(en,{})})}},27815:function(e,t,s){"use strict";s.d(t,{Ol:function(){return n},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var o=s(3827),r=s(64090),a=s(1657);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("rounded-none border-2 border-bloomberg-border bg-bloomberg-surface text-bloomberg-text shadow-xl hover:border-bloomberg-orange/50 transition-colors",s),...r})});l.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6 border-b border-bloomberg-orange/30",s),...r})});n.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("h3",{ref:t,className:(0,a.cn)("text-lg font-bold leading-none tracking-wider text-bloomberg-orange font-mono uppercase",s),...r})});i.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var o=s(75504),r=s(51367);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,o.W)(t))}}},function(e){e.O(0,[475,342,971,69,744],function(){return e(e.s=76234)}),_N_E=e.O()}]);