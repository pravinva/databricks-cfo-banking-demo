(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{76234:function(e,t,o){Promise.resolve().then(o.bind(o,63339))},63339:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return ef}});var s=o(3827),r=o(64090),l=o(28814),a=o(29733),n=o(95032),i=o(10775),d=o(77326),c=o(27815),m=o(1657);let b=r.forwardRef((e,t)=>{let{className:o,defaultValue:l,children:a,...n}=e,[i,d]=r.useState(l);return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("w-full",o),...n,children:r.Children.map(a,e=>r.isValidElement(e)?r.cloneElement(e,{activeTab:i,setActiveTab:d}):e)})});b.displayName="Tabs";let x=r.forwardRef((e,t)=>{let{className:o,children:l,activeTab:a,setActiveTab:n,...i}=e,{activeTab:d,setActiveTab:c,...b}=i;return(0,s.jsx)("div",{ref:t,className:(0,m.cn)("flex w-full h-14 items-center bg-bloomberg-surface border-b-2 border-bloomberg-orange/30 p-0 gap-1",o),...b,children:r.Children.map(l,e=>r.isValidElement(e)?r.cloneElement(e,{activeTab:a,setActiveTab:n}):e)})});x.displayName="TabsList";let g=r.forwardRef((e,t)=>{let{className:o,value:r,activeTab:l,setActiveTab:a,...n}=e;return(0,s.jsx)("button",{ref:t,className:(0,m.cn)("flex-1 items-center justify-center whitespace-nowrap rounded-none px-6 py-4 text-sm font-bold font-mono uppercase tracking-wider transition-all duration-200 border-b-4 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50",l===r?"bg-bloomberg-surface border-bloomberg-orange text-bloomberg-orange":"bg-transparent border-transparent text-bloomberg-text-dim hover:text-bloomberg-orange hover:bg-bloomberg-surface/50 hover:border-bloomberg-orange/30",o),onClick:()=>null==a?void 0:a(r),...n})});g.displayName="TabsTrigger";let h=r.forwardRef((e,t)=>{let{className:o,value:r,activeTab:l,children:a,...n}=e;return l!==r?null:(0,s.jsx)("div",{ref:t,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o),...n,children:a})});h.displayName="TabsContent";var f=o(26587),j=o(94830),u=o(38333),p=o(23356),N=o(22983),v=o(10166),y=o(43897);function _(){let[e,t]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{a();let e=setInterval(a,3e5);return()=>clearInterval(e)},[]);let a=async()=>{try{let e=await fetch("/api/data/yield-curve"),o=await e.json(),s=[{maturity:"3M",yield:parseFloat(o["3M"]),order:1},{maturity:"2Y",yield:parseFloat(o["2Y"]),order:2},{maturity:"5Y",yield:parseFloat(o["5Y"]),order:3},{maturity:"10Y",yield:parseFloat(o["10Y"]),order:4},{maturity:"30Y",yield:parseFloat(o["30Y"]),order:5}];t(s),l(!1)}catch(e){console.error("Failed to fetch yield curve:",e),l(!1)}};return o?(0,s.jsx)("div",{className:"flex items-center justify-center h-[300px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-bloomberg-orange"})}):(0,s.jsx)(f.h,{width:"100%",height:300,children:(0,s.jsxs)(j.T,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"yieldGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#ff8c00",stopOpacity:.4}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#ff8c00",stopOpacity:0})]})}),(0,s.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#333333",vertical:!1}),(0,s.jsx)(p.K,{dataKey:"maturity",stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"}}),(0,s.jsx)(N.B,{stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"},tickFormatter:e=>"".concat(e.toFixed(2),"%"),domain:["dataMin - 0.5","dataMax + 0.5"]}),(0,s.jsx)(v.u,{contentStyle:{backgroundColor:"#1a1a1a",border:"2px solid #ff8c00",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 140, 0, 0.3)",padding:"12px",fontFamily:"'Courier New', Monaco, Menlo, monospace",color:"#ffffff"},labelStyle:{fontWeight:700,marginBottom:"4px",color:"#ff8c00"},formatter:e=>["".concat(e.toFixed(2),"%"),"Yield"]}),(0,s.jsx)(y.u,{type:"monotone",dataKey:"yield",stroke:"#ff8c00",strokeWidth:3,fill:"url(#yieldGradient)",animationDuration:1e3,animationEasing:"ease-in-out"})]})})}var w=o(81433),S=o(94688),k=o(78720),E=o(74994);function F(){let[e,t]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{a()},[]);let a=async()=>{try{let e=await fetch("/api/data/lcr"),o=await e.json(),s=[{name:"HQLA",value:o.hqla/1e9,fill:"#00ff00"},{name:"Outflows",value:-(o.net_outflows-o.hqla)/1e9,fill:"#ff0000"},{name:"Net Cash",value:o.net_outflows/1e9,fill:"#ff8c00"}];t(s),l(!1)}catch(e){console.error("Failed to fetch LCR:",e),l(!1)}};return o?(0,s.jsx)("div",{className:"flex items-center justify-center h-[300px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-bloomberg-orange"})}):(0,s.jsx)(f.h,{width:"100%",height:300,children:(0,s.jsxs)(w.v,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#333333",vertical:!1}),(0,s.jsx)(p.K,{dataKey:"name",stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"}}),(0,s.jsx)(N.B,{stroke:"#999999",fontSize:12,fontFamily:"'Courier New', Monaco, Menlo, monospace",tickLine:!1,axisLine:{stroke:"#333333"},tickFormatter:e=>"$".concat(Math.abs(e).toFixed(1),"B")}),(0,s.jsx)(v.u,{contentStyle:{backgroundColor:"#1a1a1a",border:"2px solid #ff8c00",borderRadius:"0",boxShadow:"0 0 20px rgba(255, 140, 0, 0.3)",padding:"12px",fontFamily:"'Courier New', Monaco, Menlo, monospace",color:"#ffffff"},formatter:e=>["$".concat(Math.abs(e).toFixed(2),"B"),""]}),(0,s.jsx)(S.d,{y:0,stroke:"#333333",strokeWidth:2}),(0,s.jsx)(k.$,{dataKey:"value",radius:[0,0,0,0],animationDuration:1e3,children:e.map((e,t)=>(0,s.jsx)(E.b,{fill:e.fill},"cell-".concat(t)))})]})})}var C=o(4504);function T(e){let{title:t,value:o,change:r,trend:a,icon:n,highlight:i=!1,dataSource:d}=e,c={up:"text-bloomberg-green bloomberg-glow-green",down:"text-bloomberg-red bloomberg-glow-red",neutral:"text-bloomberg-amber"};return(0,s.jsx)(C.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:{y:-4,boxShadow:"0 0 20px rgba(255, 140, 0, 0.3)"},children:(0,s.jsxs)("div",{className:"bloomberg-panel rounded-none p-6 transition-all duration-200 relative border-2 ".concat(i?"border-bloomberg-orange":"border-bloomberg-border hover:border-bloomberg-orange/50"),children:[d&&(0,s.jsxs)("div",{className:"group absolute top-3 right-3",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 text-bloomberg-text-dim cursor-help"}),(0,s.jsx)("div",{className:"absolute top-full right-0 mt-2 hidden group-hover:block z-50 w-72",children:(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange text-bloomberg-text text-xs p-3 shadow-lg",children:[(0,s.jsx)("div",{className:"font-bold mb-1 text-bloomberg-orange",children:"DATA SOURCE"}),(0,s.jsx)("div",{className:"text-bloomberg-text-dim font-mono text-[10px]",children:d})]})})]}),(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)(C.E.div,{className:"".concat(c[a]),whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:n}),(0,s.jsx)("div",{className:"text-xs font-bold font-mono px-2 py-1 ".concat(c[a]),children:r})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-2 font-mono font-bold tracking-wider",children:t.toUpperCase()}),(0,s.jsx)(C.E.p,{className:"text-3xl font-bold text-bloomberg-orange bloomberg-glow font-mono tabular-nums",initial:{scale:.9},animate:{scale:1},transition:{duration:.2},children:o})]})]})})}var A=o(8792);let R=(0,r.createContext)(void 0);function D(e){let{children:t}=e,[o,l]=(0,r.useState)({view:"dashboard",filters:{},breadcrumbs:[{label:"Dashboard",view:"dashboard",filters:{}}]});return(0,s.jsx)(R.Provider,{value:{state:o,navigateTo:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;l(s=>({view:e,filters:t,breadcrumbs:[...s.breadcrumbs,{label:o,view:e,filters:t}]}))},navigateBack:()=>{l(e=>{if(e.breadcrumbs.length<=1)return e;let t=e.breadcrumbs.slice(0,-1),o=t[t.length-1];return{view:o.view,filters:o.filters,breadcrumbs:t}})},reset:()=>{l({view:"dashboard",filters:{},breadcrumbs:[{label:"Dashboard",view:"dashboard",filters:{}}]})}},children:t})}let L=()=>{let e=(0,r.useContext)(R);if(!e)throw Error("useDrillDown must be used within DrillDownProvider");return e};var O=o(35005),M=o(37805);function B(){let{state:e,navigateBack:t,reset:o}=L();return e.breadcrumbs.length<=1?null:(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6 text-sm",children:[(0,s.jsx)("button",{onClick:o,className:"flex items-center gap-1 text-slate-600 hover:text-blue-600 transition-colors",children:(0,s.jsx)(O.Z,{className:"h-4 w-4"})}),e.breadcrumbs.map((o,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(M.Z,{className:"h-4 w-4 text-slate-400"}),(0,s.jsx)("button",{onClick:()=>{if(r<e.breadcrumbs.length-1)for(let o=0;o<e.breadcrumbs.length-r-1;o++)t()},className:"".concat(r===e.breadcrumbs.length-1?"text-slate-900 font-medium":"text-slate-600 hover:text-blue-600"," transition-colors"),children:o.label})]},r))]})}let P=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:"w-full caption-bottom text-sm ".concat(o||""),...r})})});P.displayName="Table";let I=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("thead",{ref:t,className:"[&_tr]:border-b ".concat(o||""),...r})});I.displayName="TableHeader";let Y=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:"[&_tr:last-child]:border-0 ".concat(o||""),...r})});Y.displayName="TableBody",r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:"border-t-2 border-bloomberg-orange/30 bg-bloomberg-surface font-medium [&>tr]:last:border-b-0 ".concat(o||""),...r})}).displayName="TableFooter";let $=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("tr",{ref:t,className:"border-b border-bloomberg-border transition-colors hover:bg-bloomberg-surface/80 data-[state=selected]:bg-bloomberg-surface ".concat(o||""),...r})});$.displayName="TableRow";let U=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("th",{ref:t,className:"h-12 px-4 text-left align-middle font-bold text-bloomberg-text [&:has([role=checkbox])]:pr-0 ".concat(o||""),...r})});U.displayName="TableHead";let Z=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("td",{ref:t,className:"p-4 align-middle text-bloomberg-text [&:has([role=checkbox])]:pr-0 ".concat(o||""),...r})});function K(e){let{className:t,variant:o="default",...r}=e;return(0,s.jsx)("div",{className:"inline-flex items-center rounded-none border-2 px-2.5 py-0.5 text-xs font-bold font-mono transition-colors focus:outline-none ".concat({default:"border-transparent bg-bloomberg-orange text-black hover:bg-bloomberg-orange/80",secondary:"border-transparent bg-bloomberg-surface text-bloomberg-text hover:bg-bloomberg-surface/80",destructive:"border-transparent bg-bloomberg-red text-white hover:bg-bloomberg-red/80",outline:"text-bloomberg-orange border-bloomberg-orange bg-bloomberg-surface",success:"border-transparent bg-bloomberg-green text-black hover:bg-bloomberg-green/80"}[o]," ").concat(t||""),...r})}Z.displayName="TableCell",r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("caption",{ref:t,className:"mt-4 text-sm text-bloomberg-text-dim ".concat(o||""),...r})}).displayName="TableCaption";var z=o(37211);function H(e){let{filters:t={},onLoanClick:o,type:l="loans"}=e,[a,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),{navigateTo:c}=L();(0,r.useEffect)(()=>{let e=new URLSearchParams;t.product_type&&e.append("product_type",t.product_type),t.days&&e.append("days",t.days.toString()),d(!0);let o="loans"===l?"loans":"deposits";fetch("http://localhost:8000/api/data/".concat(o,"?").concat(e)).then(e=>e.json()).then(e=>{n(e[l]||[]),d(!1)}).catch(e=>{console.error("Error loading ".concat(l,":"),e),d(!1)})},[t,l]);let m=e=>{"loans"===l&&o&&o(e.loan_id)},b=e=>({Current:"bg-bloomberg-surface text-bloomberg-green border-2 border-bloomberg-green",Past_Due_30:"bg-bloomberg-surface text-bloomberg-amber border-2 border-bloomberg-amber",Past_Due_60:"bg-bloomberg-surface text-bloomberg-orange border-2 border-bloomberg-orange",Past_Due_90:"bg-bloomberg-surface text-bloomberg-red border-2 border-bloomberg-red",Default:"bg-bloomberg-surface text-bloomberg-red border-2 border-bloomberg-red"})[e]||"bg-bloomberg-surface text-bloomberg-text-dim border-2 border-bloomberg-border";return i?(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-12 bg-bloomberg-surface rounded-none"}),(0,s.jsx)("div",{className:"h-96 bg-bloomberg-surface rounded-none"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-bloomberg-surface rounded-none border-2 border-bloomberg-border p-4 hover:border-bloomberg-orange/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-bloomberg-text-dim",children:[(0,s.jsx)(z.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{className:"font-bold font-mono",children:[a.length.toLocaleString()," ","loans"===l?"LOANS":"DEPOSITS"]}),t.product_type&&(0,s.jsx)(K,{variant:"outline",className:"bg-bloomberg-surface border-bloomberg-orange text-bloomberg-orange font-mono",children:t.product_type})]}),(0,s.jsx)("div",{className:"flex gap-2",children:("loans"===l?["C&I","Commercial_RE","Residential_Mortgage","Consumer_Auto"]:["DDA","MMDA","Savings","CD","NOW"]).map(e=>(0,s.jsx)("button",{onClick:()=>{c("loans"===l?"loan-table":"deposit-table",{product_type:e},"".concat(e," ").concat("loans"===l?"Loans":"Deposits"))},className:"text-xs px-3 py-1.5 rounded-none border-2 transition-colors font-mono font-bold ".concat(t.product_type===e?"bg-bloomberg-orange text-black border-bloomberg-orange":"bg-bloomberg-surface text-bloomberg-text border-bloomberg-border hover:border-bloomberg-orange hover:text-bloomberg-orange"),children:e.replace("_"," ")},e))})]}),(0,s.jsx)("div",{className:"border-2 border-bloomberg-border rounded-none overflow-hidden bg-bloomberg-surface shadow-xl",children:(0,s.jsxs)(P,{children:[(0,s.jsx)(I,{children:(0,s.jsxs)($,{className:"bg-bloomberg-surface border-b-2 border-bloomberg-orange/30",children:[(0,s.jsx)(U,{className:"text-bloomberg-orange font-mono font-bold",children:"Loan ID"}),(0,s.jsx)(U,{className:"text-bloomberg-orange font-mono font-bold",children:"Borrower"}),(0,s.jsx)(U,{className:"text-bloomberg-orange font-mono font-bold",children:"Product"}),(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Balance"}),(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Rate"}),(0,s.jsx)(U,{className:"text-bloomberg-orange font-mono font-bold",children:"Status"}),(0,s.jsx)(U,{className:"text-bloomberg-orange font-mono font-bold",children:"Originated"}),(0,s.jsx)(U,{})]})}),(0,s.jsx)(Y,{children:0===a.length?(0,s.jsx)($,{children:(0,s.jsx)(Z,{colSpan:8,className:"text-center text-bloomberg-text-dim py-8 font-mono",children:"No loans found"})}):a.map(e=>(0,s.jsxs)($,{onClick:()=>m(e),className:"".concat("loans"===l?"cursor-pointer":""," hover:bg-bloomberg-surface/80 hover:border-bloomberg-orange/50 transition-colors border-b border-bloomberg-border group"),children:[(0,s.jsx)(Z,{className:"font-mono text-sm text-bloomberg-text",children:e.loan_id}),(0,s.jsx)(Z,{className:"text-bloomberg-text font-mono",children:e.borrower_name}),(0,s.jsx)(Z,{children:(0,s.jsx)(K,{variant:"outline",className:"text-xs bg-bloomberg-surface border-bloomberg-orange/50 text-bloomberg-orange font-mono",onClick:e=>e.stopPropagation(),children:e.product_type})}),(0,s.jsxs)(Z,{className:"text-right font-bold text-bloomberg-green bloomberg-glow-green font-mono tabular-nums",children:["$",(e.current_balance/1e6).toFixed(2),"M"]}),(0,s.jsxs)(Z,{className:"text-right text-bloomberg-amber font-mono tabular-nums",children:[e.interest_rate.toFixed(2),"%"]}),(0,s.jsx)(Z,{children:(0,s.jsx)(K,{className:"".concat(b(e.payment_status)," font-mono text-xs"),children:e.payment_status})}),(0,s.jsx)(Z,{className:"text-bloomberg-text-dim font-mono",children:new Date(e.origination_date).toLocaleDateString()}),(0,s.jsx)(Z,{children:"loans"===l&&(0,s.jsx)(M.Z,{className:"h-4 w-4 text-bloomberg-text-dim group-hover:text-bloomberg-orange transition-colors"})})]},e.loan_id))})]})})]})}var G=o(69475),V=o(52235),W=o(98998);function q(e){let{open:t,onOpenChange:o,children:r}=e;return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>o(!1)}),(0,s.jsx)("div",{className:"relative z-50",children:r})]}):null}function Q(e){let{className:t,children:o,...r}=e;return(0,s.jsx)("div",{className:"relative bg-white rounded-lg shadow-lg p-6 w-full ".concat(t||""),...r,children:o})}function X(e){let{className:t,children:o,...r}=e;return(0,s.jsx)("div",{className:"flex flex-col space-y-1.5 mb-4 ".concat(t||""),...r,children:o})}function J(e){let{className:t,children:o,...r}=e;return(0,s.jsx)("h2",{className:"text-lg font-semibold leading-none tracking-tight ".concat(t||""),...r,children:o})}function ee(e){let{loanId:t,open:o,onClose:l}=e,[a,n]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{o&&t&&(d(!0),fetch("http://localhost:8000/api/data/loan-detail/".concat(t)).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{n(e),d(!1)}).catch(e=>{console.error("Error loading loan:",e),n(null),d(!1),l()}))},[t,o]),a||i)?(0,s.jsx)(q,{open:o,onOpenChange:l,children:(0,s.jsxs)(Q,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(X,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(J,{className:"text-2xl font-semibold flex items-center gap-3",children:[(0,s.jsx)(G.Z,{className:"h-6 w-6 text-blue-600"}),"Loan Detail: ",t]}),(0,s.jsx)("button",{onClick:l,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,s.jsx)(V.Z,{className:"h-5 w-5"})})]})}),i?(0,s.jsxs)("div",{className:"space-y-4 animate-pulse",children:[(0,s.jsx)("div",{className:"h-20 bg-slate-200 rounded"}),(0,s.jsx)("div",{className:"h-40 bg-slate-200 rounded"})]}):a?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"CURRENT BALANCE"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:["$",((a.current_balance||0)/1e6).toFixed(2),"M"]}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim mt-1 font-mono",children:["Orig: $",((a.original_amount||0)/1e6).toFixed(2),"M"]})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"INTEREST RATE"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:[(a.interest_rate||0).toFixed(2),"%"]}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mt-1 font-mono",children:a.product_type})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"PAYMENT STATUS"}),(0,s.jsx)(K,{className:{Current:"bg-green-100 text-green-800 border-green-200",Past_Due_30:"bg-yellow-100 text-yellow-800 border-yellow-200",Past_Due_60:"bg-orange-100 text-orange-800 border-orange-200",Past_Due_90:"bg-red-100 text-red-800 border-red-200",Default:"bg-red-200 text-red-900 border-red-300"}[a.payment_status]||"bg-slate-100 text-slate-800",children:a.payment_status}),(a.days_past_due||0)>0&&(0,s.jsxs)("p",{className:"text-xs text-bloomberg-red mt-2 font-mono",children:[a.days_past_due," days past due"]})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"CECL RESERVE"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:["$",((a.cecl_reserve||0)/1e3).toFixed(0),"K"]}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim mt-1 font-mono",children:[((a.cecl_reserve||0)/(a.current_balance||1)*100).toFixed(2),"% of balance"]})]})]}),(0,s.jsxs)(b,{defaultValue:"overview",className:"w-full",children:[(0,s.jsxs)(x,{className:"grid grid-cols-4 w-full",children:[(0,s.jsx)(g,{value:"overview",children:"Overview"}),(0,s.jsx)(g,{value:"risk",children:"Risk Profile"}),(0,s.jsx)(g,{value:"accounting",children:"Accounting"}),(0,s.jsx)(g,{value:"history",children:"History"})]}),(0,s.jsxs)(h,{value:"overview",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-bloomberg-orange mb-3 font-mono",children:"BORROWER INFORMATION"}),(0,s.jsxs)("dl",{className:"space-y-2 text-sm bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("dt",{className:"text-bloomberg-text-dim",children:"Name:"}),(0,s.jsx)("dd",{className:"font-medium text-bloomberg-text",children:a.borrower_name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("dt",{className:"text-bloomberg-text-dim",children:"Relationship Officer:"}),(0,s.jsx)("dd",{className:"font-medium font-mono text-bloomberg-text",children:a.officer_id})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("dt",{className:"text-bloomberg-text-dim",children:"Branch:"}),(0,s.jsx)("dd",{className:"font-medium font-mono text-bloomberg-text",children:a.branch_id})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-bloomberg-orange mb-3 font-mono",children:"LOAN TERMS"}),(0,s.jsxs)("dl",{className:"space-y-2 text-sm bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("dt",{className:"text-bloomberg-text-dim",children:"Origination:"}),(0,s.jsx)("dd",{className:"font-medium text-bloomberg-text font-mono",children:new Date(a.origination_date).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("dt",{className:"text-bloomberg-text-dim",children:"Maturity:"}),(0,s.jsx)("dd",{className:"font-medium text-bloomberg-text font-mono",children:new Date(a.maturity_date).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("dt",{className:"text-bloomberg-text-dim",children:"Original Amount:"}),(0,s.jsxs)("dd",{className:"font-medium text-bloomberg-text font-mono",children:["$",(a.original_amount/1e6).toFixed(2),"M"]})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-bloomberg-orange mb-3 font-mono",children:"COLLATERAL"}),(0,s.jsx)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim",children:"Type"}),(0,s.jsx)("p",{className:"font-medium text-bloomberg-text",children:a.collateral_type})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim",children:"Value"}),(0,s.jsxs)("p",{className:"font-medium text-bloomberg-text font-mono",children:["$",(a.collateral_value/1e6).toFixed(2),"M"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim",children:"LTV Ratio"}),(0,s.jsxs)("p",{className:"font-medium text-bloomberg-text font-mono",children:[(100*a.ltv_ratio).toFixed(1),"%"]})]})]})})]})]}),(0,s.jsx)(h,{value:"risk",className:"space-y-4",children:(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold text-bloomberg-orange mb-4 flex items-center gap-2 font-mono",children:[(0,s.jsx)(W.Z,{className:"h-5 w-5 text-bloomberg-orange"}),"CECL RISK PARAMETERS"]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim mb-2 font-mono",children:"Probability of Default (PD)"}),(0,s.jsx)("div",{className:"flex items-baseline gap-2",children:(0,s.jsxs)("p",{className:"text-3xl font-bold text-bloomberg-text font-mono",children:[(100*(a.pd||0)).toFixed(2),"%"]})}),(0,s.jsx)("div",{className:"mt-2 h-2 bg-black/50 rounded-none overflow-hidden border border-bloomberg-orange/20",children:(0,s.jsx)("div",{className:"h-full bg-bloomberg-orange",style:{width:"".concat(100*a.pd,"%")}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim mb-2 font-mono",children:"Loss Given Default (LGD)"}),(0,s.jsx)("div",{className:"flex items-baseline gap-2",children:(0,s.jsxs)("p",{className:"text-3xl font-bold text-bloomberg-text font-mono",children:[(100*(a.lgd||0)).toFixed(1),"%"]})}),(0,s.jsx)("div",{className:"mt-2 h-2 bg-black/50 rounded-none overflow-hidden border border-bloomberg-orange/20",children:(0,s.jsx)("div",{className:"h-full bg-bloomberg-red",style:{width:"".concat(100*a.lgd,"%")}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim mb-2 font-mono",children:"CECL Reserve"}),(0,s.jsx)("div",{className:"flex items-baseline gap-2",children:(0,s.jsxs)("p",{className:"text-3xl font-bold text-bloomberg-text font-mono",children:["$",((a.cecl_reserve||0)/1e3).toFixed(0),"K"]})}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim mt-2 font-mono",children:[((a.cecl_reserve||0)/(a.current_balance||1)*100).toFixed(3),"% of balance"]})]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t border-bloomberg-orange/30",children:[(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:[(0,s.jsx)("strong",{className:"text-bloomberg-orange",children:"Formula:"})," CECL Reserve = EAD \xd7 PD \xd7 LGD"]}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim mt-1 font-mono",children:["= $",((a.current_balance||0)/1e6).toFixed(2),"M \xd7 ",(100*(a.pd||0)).toFixed(2),"% \xd7 ",(100*(a.lgd||0)).toFixed(1),"% = $",((a.cecl_reserve||0)/1e3).toFixed(0),"K"]})]})]})}),(0,s.jsxs)(h,{value:"accounting",className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-bloomberg-text mb-3",children:"GL Entries for This Loan"}),a.gl_entries&&a.gl_entries.length>0?(0,s.jsx)("div",{className:"space-y-2",children:a.gl_entries.map((e,t)=>(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-sm font-medium text-bloomberg-orange",children:e.entry_id}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim",children:new Date(e.entry_date).toLocaleDateString()})]}),(0,s.jsx)(K,{variant:"true"===e.is_balanced||!0===e.is_balanced?"success":"destructive",children:"true"===e.is_balanced||!0===e.is_balanced?"Balanced":"Unbalanced"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-bloomberg-text-dim",children:"Total Debits:"}),(0,s.jsxs)("p",{className:"font-medium text-bloomberg-text font-mono",children:["$",(e.total_debits/1e6).toFixed(2),"M"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-bloomberg-text-dim",children:"Total Credits:"}),(0,s.jsxs)("p",{className:"font-medium text-bloomberg-text font-mono",children:["$",(e.total_credits/1e6).toFixed(2),"M"]})]})]}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mt-3",children:e.description})]},t))}):(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim",children:"No GL entries found"}),(0,s.jsx)("h3",{className:"font-semibold text-bloomberg-text mb-3 mt-6",children:"Subledger Transactions"}),a.subledger_entries&&a.subledger_entries.length>0?(0,s.jsx)("div",{className:"border border-bloomberg-orange/30 rounded-none overflow-hidden bg-bloomberg-surface",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-black/50 border-b border-bloomberg-orange/30",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-3 font-medium text-bloomberg-orange",children:"Date"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-bloomberg-orange",children:"Type"}),(0,s.jsx)("th",{className:"text-right p-3 font-medium text-bloomberg-orange",children:"Principal"}),(0,s.jsx)("th",{className:"text-right p-3 font-medium text-bloomberg-orange",children:"Interest"}),(0,s.jsx)("th",{className:"text-right p-3 font-medium text-bloomberg-orange",children:"Balance After"})]})}),(0,s.jsx)("tbody",{children:a.subledger_entries.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t border-bloomberg-orange/10 hover:bg-bloomberg-orange/5",children:[(0,s.jsx)("td",{className:"p-3 text-bloomberg-text font-mono",children:new Date(e.posting_date).toLocaleDateString()}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsx)(K,{variant:"outline",className:"text-xs",children:e.transaction_type})}),(0,s.jsxs)("td",{className:"p-3 text-right font-mono text-bloomberg-text",children:["$",((e.principal_amount||0)/1e3).toFixed(1),"K"]}),(0,s.jsxs)("td",{className:"p-3 text-right font-mono text-bloomberg-text",children:["$",((e.interest_amount||0)/1e3).toFixed(1),"K"]}),(0,s.jsxs)("td",{className:"p-3 text-right font-mono font-medium text-bloomberg-text",children:["$",((e.balance_after||0)/1e6).toFixed(2),"M"]})]},t))})]})}):(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim",children:"No subledger entries found"})]}),(0,s.jsxs)(h,{value:"history",className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-bloomberg-text mb-4",children:"Payment History Timeline"}),a.subledger_entries&&a.subledger_entries.length>0?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-bloomberg-orange mb-4 font-mono",children:"BALANCE TREND"}),(0,s.jsx)("div",{className:"space-y-2",children:a.subledger_entries.sort((e,t)=>new Date(e.posting_date).getTime()-new Date(t.posting_date).getTime()).map((e,t)=>{let o=e.balance_after/a.original_amount*100;return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-32 text-xs text-bloomberg-text-dim font-mono",children:new Date(e.posting_date).toLocaleDateString()}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"h-8 bg-black/50 rounded-none overflow-hidden border border-bloomberg-orange/20",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-bloomberg-orange to-bloomberg-orange/60 transition-all duration-300",style:{width:"".concat(o,"%")}})})}),(0,s.jsxs)("div",{className:"w-32 text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-mono font-semibold text-bloomberg-text",children:["$",(e.balance_after/1e6).toFixed(2),"M"]}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim",children:[o.toFixed(1),"%"]})]})]},t)})})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-bloomberg-orange mb-4 font-mono",children:"TRANSACTION DETAILS"}),(0,s.jsx)("div",{className:"space-y-3",children:a.subledger_entries.sort((e,t)=>new Date(t.posting_date).getTime()-new Date(e.posting_date).getTime()).map((e,t)=>(0,s.jsxs)("div",{className:"border-l-2 border-bloomberg-orange/50 pl-4 py-2 hover:border-bloomberg-orange transition-colors",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-bloomberg-text",children:e.transaction_type}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:new Date(e.posting_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),(0,s.jsx)(K,{variant:"Origination"===e.transaction_type?"default":"outline",className:"text-xs",children:e.transaction_type})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim",children:"Principal"}),(0,s.jsxs)("p",{className:"text-sm font-mono text-bloomberg-text",children:["$",((e.principal_amount||0)/1e3).toFixed(1),"K"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim",children:"Interest"}),(0,s.jsxs)("p",{className:"text-sm font-mono text-bloomberg-text",children:["$",((e.interest_amount||0)/1e3).toFixed(1),"K"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim",children:"Balance After"}),(0,s.jsxs)("p",{className:"text-sm font-mono font-semibold text-bloomberg-orange",children:["$",((e.balance_after||0)/1e6).toFixed(2),"M"]})]})]})]},t))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"TOTAL PRINCIPAL PAID"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:["$",(a.subledger_entries.filter(e=>"Payment"===e.transaction_type).reduce((e,t)=>e+(t.principal_amount||0),0)/1e6).toFixed(2),"M"]})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"TOTAL INTEREST PAID"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:["$",(a.subledger_entries.filter(e=>"Payment"===e.transaction_type).reduce((e,t)=>e+(t.interest_amount||0),0)/1e3).toFixed(1),"K"]})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border border-bloomberg-orange/30 rounded-none p-4",children:[(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim mb-1 font-mono",children:"REMAINING BALANCE"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-bloomberg-orange font-mono",children:["$",(a.current_balance/1e6).toFixed(2),"M"]})]})]})]}):(0,s.jsx)("p",{className:"text-sm text-bloomberg-text-dim",children:"No payment history available"})]})]})]}):null]})}):null}var et=o(48219);function eo(e){let{type:t}=e,[o,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),{navigateTo:d}=L();(0,r.useEffect)(()=>{c()},[t]);let c=async()=>{try{i(!0);let e=await fetch("/api/data/portfolio-breakdown"),o=await e.json();if(o.success){let e=("loans"===t?o.loans:o.deposits).map(e=>({product_type:e[0],count:parseInt(e[1]),balance_billions:parseFloat(e[2]),avg_rate:parseFloat(e[3]),reserve_pct:e[4]?parseFloat(e[4]):void 0}));l(e)}i(!1)}catch(e){console.error("Failed to fetch portfolio data:",e),i(!1)}},m=e=>{"loans"===t?d("loan-table",{product_type:e.product_type},"".concat(e.product_type," Loans")):d("deposit-table",{product_type:e.product_type},"".concat(e.product_type," Deposits"))};if(n)return(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-12 bg-bloomberg-surface rounded-none"}),(0,s.jsx)("div",{className:"h-96 bg-bloomberg-surface rounded-none"})]});let b=o.reduce((e,t)=>e+t.balance_billions,0),x=o.reduce((e,t)=>e+t.count,0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-bloomberg-surface border-2 border-bloomberg-border rounded-none p-6 hover:border-bloomberg-orange/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-bloomberg-text-dim mb-3",children:[(0,s.jsx)(et.Z,{className:"h-5 w-5"}),(0,s.jsx)("p",{className:"text-xs font-mono font-bold tracking-wider uppercase",children:"Total Balance"})]}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-bloomberg-orange bloomberg-glow font-mono tabular-nums",children:["$",b.toFixed(2),"B"]})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border-2 border-bloomberg-border rounded-none p-6 hover:border-bloomberg-orange/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-bloomberg-text-dim mb-3",children:[(0,s.jsx)(a.Z,{className:"h-5 w-5"}),(0,s.jsxs)("p",{className:"text-xs font-mono font-bold tracking-wider uppercase",children:["Total ","loans"===t?"Loans":"Accounts"]})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-bloomberg-green bloomberg-glow-green font-mono tabular-nums",children:x.toLocaleString()})]}),(0,s.jsxs)("div",{className:"bg-bloomberg-surface border-2 border-bloomberg-border rounded-none p-6 hover:border-bloomberg-orange/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-bloomberg-text-dim mb-3",children:[(0,s.jsx)(a.Z,{className:"h-5 w-5"}),(0,s.jsx)("p",{className:"text-xs font-mono font-bold tracking-wider uppercase",children:"Product Types"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-bloomberg-amber font-mono tabular-nums",children:o.length})]})]}),(0,s.jsxs)("div",{className:"border-2 border-bloomberg-border rounded-none overflow-hidden bg-bloomberg-surface shadow-xl",children:[(0,s.jsxs)("div",{className:"bg-bloomberg-surface px-6 py-4 border-b-2 border-bloomberg-orange/30",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-bloomberg-orange font-mono uppercase tracking-wider",children:["loans"===t?"Loan":"Deposit"," Portfolio Breakdown"]}),(0,s.jsxs)("p",{className:"text-sm text-bloomberg-text-dim mt-1 font-mono",children:["Click any row to view detailed ",t," list"]})]}),(0,s.jsxs)(P,{children:[(0,s.jsx)(I,{children:(0,s.jsxs)($,{className:"bg-bloomberg-surface border-b-2 border-bloomberg-orange/30",children:[(0,s.jsx)(U,{className:"text-bloomberg-orange font-mono font-bold",children:"Product Type"}),(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Count"}),(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Balance"}),(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Avg Rate"}),"loans"===t&&(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"Reserve %"}),(0,s.jsx)(U,{className:"text-right text-bloomberg-orange font-mono font-bold",children:"% of Total"}),(0,s.jsx)(U,{})]})}),(0,s.jsx)(Y,{children:o.map((e,o)=>{var r;let l=e.balance_billions/b*100;return(0,s.jsxs)($,{onClick:()=>m(e),className:"cursor-pointer hover:bg-bloomberg-surface/80 hover:border-bloomberg-orange/50 transition-colors border-b border-bloomberg-border group",children:[(0,s.jsx)(Z,{children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(K,{variant:"outline",className:"text-xs bg-bloomberg-surface border-bloomberg-orange/50 text-bloomberg-orange font-mono",children:e.product_type})})}),(0,s.jsx)(Z,{className:"text-right font-bold text-bloomberg-text font-mono tabular-nums",children:e.count.toLocaleString()}),(0,s.jsxs)(Z,{className:"text-right font-bold text-bloomberg-green bloomberg-glow-green font-mono tabular-nums",children:["$",e.balance_billions.toFixed(2),"B"]}),(0,s.jsxs)(Z,{className:"text-right text-bloomberg-amber font-mono tabular-nums",children:[e.avg_rate.toFixed(2),"%"]}),"loans"===t&&(0,s.jsx)(Z,{className:"text-right",children:(0,s.jsxs)(K,{className:"bg-bloomberg-surface border-2 border-bloomberg-amber text-bloomberg-amber font-mono",children:[null===(r=e.reserve_pct)||void 0===r?void 0:r.toFixed(2),"%"]})}),(0,s.jsx)(Z,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("div",{className:"w-16 h-2 bg-bloomberg-border rounded-none overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-bloomberg-orange rounded-none",style:{width:"".concat(l,"%")}})}),(0,s.jsxs)("span",{className:"text-sm text-bloomberg-text-dim font-mono tabular-nums w-12",children:[l.toFixed(1),"%"]})]})}),(0,s.jsx)(Z,{children:(0,s.jsx)(M.Z,{className:"h-4 w-4 text-bloomberg-text-dim group-hover:text-bloomberg-orange transition-colors"})})]},o)})})]})]})]})}var es=o(61524);function er(){let[e,t]=(0,r.useState)(null),[o,l]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{m()},[]);let m=async()=>{try{let[e,o,s]=await Promise.all([fetch("/api/data/deposit-beta-metrics"),fetch("/api/data/deposit-beta-distribution"),fetch("/api/data/at-risk-deposits")]),r=await e.json(),a=await o.json(),i=await s.json();r.success&&t(r.data),a.success&&l(a.data),i.success&&n(i.data),d(!1)}catch(e){console.error("Failed to fetch deposit beta data:",e),d(!1)}};if(i)return(0,s.jsx)("div",{className:"text-sm text-bloomberg-text-dim font-mono",children:"Loading deposit beta model..."});let b={Strategic:"#059669",Tactical:"#0891B2",Expendable:"#DC2626"};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsx)(c.Ol,{className:"pb-3",children:(0,s.jsx)(c.ll,{className:"text-sm font-mono text-bloomberg-text-dim tracking-wider",children:"PORTFOLIO BETA"})}),(0,s.jsxs)(c.aY,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-bloomberg-text font-mono",children:null==e?void 0:e.avg_beta.toFixed(3)}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim font-mono mt-2",children:[null==e?void 0:e.total_accounts.toLocaleString()," accounts"]}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:["$",((null==e?void 0:e.total_balance)/1e9).toFixed(1),"B total"]})]})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-orange bg-bloomberg-surface",children:[(0,s.jsx)(c.Ol,{className:"pb-3",children:(0,s.jsxs)(c.ll,{className:"text-sm font-mono text-bloomberg-text-dim tracking-wider flex items-center",children:["AT-RISK DEPOSITS",(0,s.jsx)(es.Z,{className:"h-4 w-4 ml-2 text-bloomberg-orange bloomberg-glow"})]})}),(0,s.jsxs)(c.aY,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-bloomberg-orange font-mono bloomberg-glow",children:["$",((null==e?void 0:e.at_risk_balance)/1e9).toFixed(1),"B"]}),(0,s.jsxs)("p",{className:"text-xs text-bloomberg-text-dim font-mono mt-2",children:[null==e?void 0:e.at_risk_accounts.toLocaleString()," accounts"]}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-amber font-mono font-bold",children:"Below market rate"})]})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsx)(c.Ol,{className:"pb-3",children:(0,s.jsx)(c.ll,{className:"text-sm font-mono text-bloomberg-text-dim tracking-wider",children:"STRATEGIC"})}),(0,s.jsxs)(c.aY,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-bloomberg-green font-mono bloomberg-glow-green",children:[null==e?void 0:e.strategic_pct.toFixed(1),"%"]}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono mt-2",children:"Low sensitivity (sticky)"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-green font-mono font-bold",children:"✓ Stable funding"})]})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsx)(c.Ol,{className:"pb-3",children:(0,s.jsx)(c.ll,{className:"text-sm font-mono text-bloomberg-text-dim tracking-wider",children:"EXPENDABLE"})}),(0,s.jsxs)(c.aY,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-bloomberg-red font-mono bloomberg-glow-red",children:[null==e?void 0:e.expendable_pct.toFixed(1),"%"]}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono mt-2",children:"High sensitivity (hot money)"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-red font-mono font-bold",children:"⚠ Flight risk"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"BETA DISTRIBUTION BY PRODUCT"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Rate sensitivity by deposit type"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 border-2 border-bloomberg-border bg-black/20 hover:border-bloomberg-orange/70 transition-colors",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-orange font-mono text-sm",children:e.product_type}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:[e.account_count.toLocaleString()," accounts"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-text font-mono text-xl",children:e.avg_beta.toFixed(3)}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:["$",(e.total_balance/1e9).toFixed(2),"B"]})]})]}),(0,s.jsx)("div",{className:"h-2 rounded-full mt-2",style:{width:"".concat(e.avg_beta/1*100,"%"),backgroundColor:b[e.relationship_category]||"#666"}}),(0,s.jsx)("div",{className:"text-xs font-mono mt-2",style:{color:b[e.relationship_category]},children:e.relationship_category})]},t))})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"TOP 10 AT-RISK ACCOUNTS"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Accounts priced below market"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:a.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"p-3 border-2 border-bloomberg-border bg-black/20 hover:border-bloomberg-red/70 transition-colors",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-text font-mono text-xs",children:e.account_id}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:e.product_type})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-sm",children:["$",(e.current_balance/1e6).toFixed(2),"M"]}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-red font-mono font-bold mt-1",children:["β = ",e.predicted_beta.toFixed(3)]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs font-mono",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Our Rate:"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-bloomberg-text",children:[(100*e.stated_rate).toFixed(2),"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Market:"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-bloomberg-text",children:[(100*e.market_rate).toFixed(2),"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Gap:"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-bloomberg-red font-bold",children:[(100*e.rate_gap).toFixed(0)," bps"]})]})]}),(0,s.jsx)("div",{className:"text-xs font-mono font-bold mt-2",style:{color:b[e.relationship_category]},children:e.relationship_category})]},t))})})]})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"PHASE 1 MODEL PERFORMANCE"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Enhanced beta model with 40+ features"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"p-4 border-2 border-bloomberg-border bg-black/20",children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-2",children:"MAPE (ENHANCED)"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-bloomberg-green font-mono bloomberg-glow-green",children:"7.2%"}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-green font-mono font-bold mt-1",children:"+41% improvement"})]}),(0,s.jsxs)("div",{className:"p-4 border-2 border-bloomberg-border bg-black/20",children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-2",children:"BASELINE MAPE"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-bloomberg-text-dim font-mono",children:"12.3%"}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:"15 features"})]}),(0,s.jsxs)("div",{className:"p-4 border-2 border-bloomberg-border bg-black/20",children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-2",children:"FEATURES"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-bloomberg-orange font-mono bloomberg-glow",children:"40+"}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:"Moody's + Chen + Abrigo"})]}),(0,s.jsxs)("div",{className:"p-4 border-2 border-bloomberg-border bg-black/20",children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-2",children:"MODEL VERSION"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:"@champion"}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-green font-mono font-bold mt-1",children:"✓ Production"})]})]})})]})]})}var el=o(66363),ea=o(94866),en=o(98061);function ei(){let[e,t]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{m()},[]);let m=async()=>{try{let[e,o,s]=await Promise.all([fetch("/api/data/component-decay-metrics"),fetch("/api/data/cohort-survival"),fetch("/api/data/runoff-forecasts")]),r=await e.json(),a=await o.json(),i=await s.json();r.success&&t(r.data),a.success&&l(a.data),i.success&&n(i.data),d(!1)}catch(e){console.error("Failed to fetch vintage analysis data:",e),d(!1)}};if(i)return(0,s.jsx)("div",{className:"text-sm text-bloomberg-text-dim font-mono",children:"Loading vintage analysis..."});let b=o.reduce((e,t)=>{let o=e.find(e=>e.months===t.months_since_opening);return o?o[t.relationship_category]=100*t.survival_rate:e.push({months:t.months_since_opening,[t.relationship_category]:100*t.survival_rate}),e},[]).sort((e,t)=>e.months-t.months),x=a.reduce((e,t)=>{let o=e.find(e=>e.year==="Year ".concat(t.year));return o?o[t.relationship_category]=t.projected_balance/1e9:e.push({year:"Year ".concat(t.year),[t.relationship_category]:t.projected_balance/1e9}),e},[]),g={Strategic:"#059669",Tactical:"#0891B2",Expendable:"#DC2626"};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-6",children:e.map((e,t)=>(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsx)(c.Ol,{className:"pb-3",children:(0,s.jsx)(c.ll,{className:"text-sm font-mono tracking-wider",style:{color:g[e.relationship_category]},children:e.relationship_category.toUpperCase()})}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"CLOSURE RATE (λ)"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:[(100*e.closure_rate).toFixed(2),"%"]}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:"Annual account closure"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"ABGR (g)"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:[100*e.abgr>=0?"+":"",(100*e.abgr).toFixed(2),"%"]}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:"Balance growth rate"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"3-YEAR RUNOFF"}),(0,s.jsxs)("div",{className:"text-2xl font-bold font-mono",style:{color:g[e.relationship_category]},children:[(100-100*e.year_3_retention).toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:["$",(-((e.year_3_retention-1)*10)).toFixed(2),"B lost"]})]})]})})]},t))}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"KAPLAN-MEIER SURVIVAL CURVES"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Account retention by relationship category over 36 months"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(f.h,{width:"100%",height:400,children:(0,s.jsxs)(el.w,{data:b,children:[(0,s.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,s.jsx)(p.K,{dataKey:"months",stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12},label:{value:"Months Since Opening",position:"insideBottom",offset:-5,fill:"#999",fontFamily:"monospace"}}),(0,s.jsx)(N.B,{stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12},label:{value:"Survival Rate (%)",angle:-90,position:"insideLeft",fill:"#999",fontFamily:"monospace"}}),(0,s.jsx)(v.u,{contentStyle:{backgroundColor:"#000",border:"2px solid #ff8c00",fontFamily:"monospace",fontSize:"12px"},labelStyle:{color:"#ff8c00"}}),(0,s.jsx)(ea.D,{wrapperStyle:{fontFamily:"monospace",fontSize:"12px"}}),(0,s.jsx)(en.x,{type:"monotone",dataKey:"Strategic",stroke:g.Strategic,strokeWidth:3,dot:!1,name:"Strategic"}),(0,s.jsx)(en.x,{type:"monotone",dataKey:"Tactical",stroke:g.Tactical,strokeWidth:3,dot:!1,name:"Tactical"}),(0,s.jsx)(en.x,{type:"monotone",dataKey:"Expendable",stroke:g.Expendable,strokeWidth:3,dot:!1,name:"Expendable"})]})})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"3-YEAR DEPOSIT RUNOFF PROJECTIONS"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Projected deposit balances by segment (D(t+1) = D(t) \xd7 (1-λ) \xd7 (1+g))"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(f.h,{width:"100%",height:400,children:(0,s.jsxs)(w.v,{data:x,children:[(0,s.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,s.jsx)(p.K,{dataKey:"year",stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12}}),(0,s.jsx)(N.B,{stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12},label:{value:"Balance ($B)",angle:-90,position:"insideLeft",fill:"#999",fontFamily:"monospace"}}),(0,s.jsx)(v.u,{contentStyle:{backgroundColor:"#000",border:"2px solid #ff8c00",fontFamily:"monospace",fontSize:"12px"},labelStyle:{color:"#ff8c00"},formatter:e=>"$".concat(e.toFixed(2),"B")}),(0,s.jsx)(ea.D,{wrapperStyle:{fontFamily:"monospace",fontSize:"12px"}}),(0,s.jsx)(k.$,{dataKey:"Strategic",fill:g.Strategic,name:"Strategic"}),(0,s.jsx)(k.$,{dataKey:"Tactical",fill:g.Tactical,name:"Tactical"}),(0,s.jsx)(k.$,{dataKey:"Expendable",fill:g.Expendable,name:"Expendable"})]})})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"PHASE 2 RUNOFF FORECAST DETAILS"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Component decay model output by segment and year"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm font-mono",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-bloomberg-border",children:[(0,s.jsx)("th",{className:"text-left p-3 text-bloomberg-orange",children:"SEGMENT"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"YEAR"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"BEGIN BAL"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"END BAL"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"RUNOFF $"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"CUM %"})]})}),(0,s.jsx)("tbody",{children:a.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-bloomberg-border hover:bg-black/20",children:[(0,s.jsx)("td",{className:"p-3",style:{color:g[e.relationship_category]},children:e.relationship_category}),(0,s.jsx)("td",{className:"text-right p-3 text-bloomberg-text",children:e.year}),(0,s.jsxs)("td",{className:"text-right p-3 text-bloomberg-text",children:["$",(e.beginning_balance/1e9).toFixed(2),"B"]}),(0,s.jsxs)("td",{className:"text-right p-3 text-bloomberg-text",children:["$",(e.projected_balance/1e9).toFixed(2),"B"]}),(0,s.jsxs)("td",{className:"text-right p-3 text-bloomberg-red",children:["-$",(Math.abs(e.runoff_amount)/1e9).toFixed(2),"B"]}),(0,s.jsxs)("td",{className:"text-right p-3 text-bloomberg-red font-bold",children:[e.cumulative_runoff_pct.toFixed(1),"%"]})]},t))})]})})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"CHEN COMPONENT DECAY MODEL"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Separates closure rate from balance growth"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("div",{className:"p-6 bg-black/40 border-2 border-bloomberg-orange/30 rounded",children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsx)("div",{className:"text-2xl font-bold text-bloomberg-orange font-mono",children:"D(t+1) = D(t) \xd7 (1 - λ) \xd7 (1 + g)"})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6 text-sm font-mono",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-bloomberg-text-dim mb-2",children:"D(t)"}),(0,s.jsx)("div",{className:"text-bloomberg-text",children:"Deposits at time t"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-bloomberg-text-dim mb-2",children:"λ (lambda)"}),(0,s.jsx)("div",{className:"text-bloomberg-text",children:"Account closure rate"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-bloomberg-text-dim mb-2",children:"g (ABGR)"}),(0,s.jsx)("div",{className:"text-bloomberg-text",children:"Balance growth rate"})]})]})]})})]})]})}var ed=o(46578);function ec(){let[e,t]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{b()},[]);let b=async()=>{try{let[e,o,s]=await Promise.all([fetch("/api/data/stress-test-results"),fetch("/api/data/dynamic-beta-parameters"),fetch("/api/data/stress-test-summary")]),r=await e.json(),a=await o.json(),i=await s.json();r.success&&t(r.data),a.success&&l(a.data),i.success&&n(i.data),m(!1)}catch(e){console.error("Failed to fetch stress test data:",e),m(!1)}};if(i)return(0,s.jsx)("div",{className:"text-sm text-bloomberg-text-dim font-mono",children:"Loading CCAR/DFAST stress tests..."});let x=e.map(e=>({quarter:"Q".concat(e.quarter),scenario:e.scenario,CET1:e.cet1_ratio_pct,Tier1:e.tier1_ratio_pct,Total:e.total_capital_ratio_pct}));x.filter(e=>"Baseline"===e.scenario),x.filter(e=>"Adverse"===e.scenario),x.filter(e=>"Severely Adverse"===e.scenario);let g=o.length>0?(e=>{let t=[];for(let o=0;o<=6;o+=.25){let s=e.beta_min+(e.beta_max-e.beta_min)/(1+Math.exp(-e.k*(o-e.R0)));t.push({rate:o,[e.relationship_category]:s})}return t})(o[0]).map((e,t)=>{let s={...e};return o.forEach((t,o)=>{if(o>0){let o=t.beta_min+(t.beta_max-t.beta_min)/(1+Math.exp(-t.k*(e.rate-t.R0)));s[t.relationship_category]=o}}),s}):[],h={Strategic:"#059669",Tactical:"#0891B2",Expendable:"#DC2626"},_={Baseline:"#059669",Adverse:"#D97706","Severely Adverse":"#DC2626"};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-6",children:a.map((e,t)=>(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsx)(c.Ol,{className:"pb-3",children:(0,s.jsx)(c.ll,{className:"text-sm font-mono tracking-wider",style:{color:_[e.scenario]},children:e.scenario.toUpperCase()})}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"CET1 MINIMUM"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-bloomberg-text font-mono",children:[e.cet1_minimum.toFixed(1),"%"]})]}),e.cet1_minimum>=7?(0,s.jsx)(ed.Z,{className:"h-8 w-8 text-bloomberg-green bloomberg-glow-green"}):(0,s.jsx)(es.Z,{className:"h-8 w-8 text-bloomberg-red bloomberg-glow-red"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"NII IMPACT (2Y)"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-bloomberg-red font-mono",children:["-$",(Math.abs(e.nii_impact_total)/1e6).toFixed(0),"M"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"DEPOSIT RUNOFF"}),(0,s.jsxs)("div",{className:"text-xl font-bold text-bloomberg-red font-mono",children:["-$",(Math.abs(e.deposit_runoff_total)/1e9).toFixed(1),"B"]}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:["(",(e.deposit_runoff_total/3e10*100).toFixed(1),"% of total)"]})]}),(0,s.jsx)("div",{className:"text-sm font-bold font-mono p-2 text-center rounded ".concat("PASS"===e.pass_status?"bg-bloomberg-green/20 text-bloomberg-green bloomberg-glow-green":"bg-bloomberg-red/20 text-bloomberg-red bloomberg-glow-red"),children:e.pass_status})]})})]},t))}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"9-QUARTER CAPITAL RATIO PROJECTIONS (CCAR)"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"CET1, Tier 1, and Total Capital under stress scenarios"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(f.h,{width:"100%",height:400,children:(0,s.jsxs)(el.w,{data:x,children:[(0,s.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,s.jsx)(p.K,{dataKey:"quarter",stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12}}),(0,s.jsx)(N.B,{stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12},label:{value:"Capital Ratio (%)",angle:-90,position:"insideLeft",fill:"#999",fontFamily:"monospace"},domain:[0,15]}),(0,s.jsx)(v.u,{contentStyle:{backgroundColor:"#000",border:"2px solid #ff8c00",fontFamily:"monospace",fontSize:"12px"},labelStyle:{color:"#ff8c00"}}),(0,s.jsx)(ea.D,{wrapperStyle:{fontFamily:"monospace",fontSize:"12px"}}),(0,s.jsx)(en.x,{type:"monotone",dataKey:()=>7,stroke:"#DC2626",strokeDasharray:"5 5",strokeWidth:2,dot:!1,name:"CET1 Min (7%)"}),(0,s.jsx)(en.x,{type:"monotone",dataKey:()=>8.5,stroke:"#D97706",strokeDasharray:"5 5",strokeWidth:2,dot:!1,name:"Tier 1 Min (8.5%)"}),(0,s.jsx)(en.x,{type:"monotone",dataKey:"CET1",stroke:"#ff8c00",strokeWidth:3,dot:{r:4},name:"CET1 Ratio"})]})})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"DYNAMIC BETA RESPONSE CURVES (CHEN SIGMOID)"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"β(Rm) = β_min + (β_max - β_min) / [1 + exp(-k*(Rm-R0))]"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(f.h,{width:"100%",height:400,children:(0,s.jsxs)(j.T,{data:g,children:[(0,s.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,s.jsx)(p.K,{dataKey:"rate",stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12},label:{value:"Market Rate (%)",position:"insideBottom",offset:-5,fill:"#999",fontFamily:"monospace"}}),(0,s.jsx)(N.B,{stroke:"#999",tick:{fill:"#999",fontFamily:"monospace",fontSize:12},label:{value:"Beta",angle:-90,position:"insideLeft",fill:"#999",fontFamily:"monospace"},domain:[0,1]}),(0,s.jsx)(v.u,{contentStyle:{backgroundColor:"#000",border:"2px solid #ff8c00",fontFamily:"monospace",fontSize:"12px"},labelStyle:{color:"#ff8c00"},formatter:e=>e.toFixed(3)}),(0,s.jsx)(ea.D,{wrapperStyle:{fontFamily:"monospace",fontSize:"12px"}}),(0,s.jsx)(y.u,{type:"monotone",dataKey:"Strategic",stroke:h.Strategic,fill:h.Strategic,fillOpacity:.3,strokeWidth:3,name:"Strategic"}),(0,s.jsx)(y.u,{type:"monotone",dataKey:"Tactical",stroke:h.Tactical,fill:h.Tactical,fillOpacity:.3,strokeWidth:3,name:"Tactical"}),(0,s.jsx)(y.u,{type:"monotone",dataKey:"Expendable",stroke:h.Expendable,fill:h.Expendable,fillOpacity:.3,strokeWidth:3,name:"Expendable"})]})})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"DYNAMIC BETA PARAMETERS BY SEGMENT"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"Calibrated sigmoid function coefficients"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm font-mono",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-bloomberg-border",children:[(0,s.jsx)("th",{className:"text-left p-3 text-bloomberg-orange",children:"SEGMENT"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"β_MIN (0%)"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"β_MAX (6%)"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"k (STEEP)"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"R0 (INFLECT)"}),(0,s.jsx)("th",{className:"text-right p-3 text-bloomberg-orange",children:"RANGE"})]})}),(0,s.jsx)("tbody",{children:o.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-bloomberg-border hover:bg-black/20",children:[(0,s.jsx)("td",{className:"p-3",style:{color:h[e.relationship_category]},children:e.relationship_category}),(0,s.jsx)("td",{className:"text-right p-3 text-bloomberg-text",children:e.beta_min.toFixed(4)}),(0,s.jsx)("td",{className:"text-right p-3 text-bloomberg-text",children:e.beta_max.toFixed(4)}),(0,s.jsx)("td",{className:"text-right p-3 text-bloomberg-text",children:e.k.toFixed(2)}),(0,s.jsxs)("td",{className:"text-right p-3 text-bloomberg-text",children:[(100*e.R0).toFixed(2),"%"]}),(0,s.jsxs)("td",{className:"text-right p-3 text-bloomberg-amber font-bold",children:[((e.beta_max-e.beta_min)*100).toFixed(1)," bps"]})]},t))})]})})})]}),(0,s.jsxs)(c.Zb,{className:"border-2 border-bloomberg-border bg-bloomberg-surface",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsx)(c.ll,{className:"text-lg font-bold text-bloomberg-orange tracking-wider font-mono",children:"PHASE 3 REGULATORY COMPLIANCE"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono",children:"CCAR/DFAST submission readiness"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"p-6 bg-black/40 border-2 border-bloomberg-green rounded",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(d.Z,{className:"h-12 w-12 text-bloomberg-green bloomberg-glow-green"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-bloomberg-green font-mono bloomberg-glow-green",children:"✓"})]}),(0,s.jsx)("div",{className:"text-lg font-bold text-bloomberg-green font-mono mb-2",children:"STRESS TESTS PASSED"}),(0,s.jsx)("div",{className:"text-sm text-bloomberg-text-dim font-mono",children:"All scenarios meet CET1 ≥ 7% minimum"}),(0,s.jsx)("div",{className:"text-sm text-bloomberg-text-dim font-mono mt-2",children:"Ready for Federal Reserve submission"})]}),(0,s.jsx)("div",{className:"p-6 bg-black/40 border-2 border-bloomberg-border rounded",children:(0,s.jsxs)("div",{className:"text-sm font-mono space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Submission Deadline:"}),(0,s.jsx)("span",{className:"text-bloomberg-text font-bold",children:"April 5, 2026"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Model Version:"}),(0,s.jsx)("span",{className:"text-bloomberg-text font-bold",children:"Phase 3 Dynamic"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Scenarios Tested:"}),(0,s.jsx)("span",{className:"text-bloomberg-text font-bold",children:"3 (B/A/SA)"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Forecast Horizon:"}),(0,s.jsx)("span",{className:"text-bloomberg-text font-bold",children:"9 Quarters"})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-3 border-t border-bloomberg-border",children:[(0,s.jsx)("span",{className:"text-bloomberg-text-dim",children:"Status:"}),(0,s.jsx)("span",{className:"text-bloomberg-green font-bold bloomberg-glow-green",children:"COMPLIANT"})]})]})})]})})]})]})}function em(e){let{source:t}=e;return(0,s.jsxs)("div",{className:"group relative inline-block ml-2",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 text-slate-400 cursor-help"}),(0,s.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 w-64",children:(0,s.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg p-3 shadow-lg",children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Data Source"}),(0,s.jsx)("div",{className:"text-slate-300",children:t}),(0,s.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1",children:(0,s.jsx)("div",{className:"border-4 border-transparent border-t-slate-900"})})]})})]})}function eb(e){let{type:t}=e,[o,l]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),{navigateTo:i}=L();(0,r.useEffect)(()=>{d()},[t]);let d=async()=>{try{let e=await fetch("/api/data/portfolio-breakdown"),o=await e.json();o.success&&l("loans"===t?o.loans:o.deposits),n(!1)}catch(e){console.error("Failed to fetch portfolio data:",e),n(!1)}};return a?(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Loading..."}):(0,s.jsx)("div",{className:"space-y-3",children:o.map((e,o)=>(0,s.jsxs)("div",{onClick:()=>{let o=e[0];i("loans"===t?"loan-table":"deposit-table",{product_type:o},"".concat(o," ").concat("loans"===t?"Loans":"Deposits"))},className:"flex items-center justify-between p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e[0]}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:[Number(e[1]).toLocaleString()," accounts"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:["$",Number(e[2]).toFixed(2),"B"]}),(0,s.jsxs)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:[Number(e[3]).toFixed(2),"% avg rate"]})]})]},o))})}function ex(){var e,t,o,l,a,n,i,d;let[c,m]=(0,r.useState)(null),[b,x]=(0,r.useState)(!0),{navigateTo:g}=L();(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/data/risk-metrics"),t=await e.json();t.success&&m(t),x(!1)}catch(e){console.error("Failed to fetch risk metrics:",e),x(!1)}};return b?(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Loading risk metrics..."}):c?(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900",children:"Credit Risk by Product"}),(0,s.jsx)("div",{className:"space-y-3",children:null===(e=c.credit_risk)||void 0===e?void 0:e.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>{g("loan-table",{product_type:e[0]},"".concat(e[0]," Loans - Risk View"))},className:"p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e[0]}),(0,s.jsxs)("div",{className:"text-lg font-bold text-bloomberg-text font-mono",children:["$",Number(e[1]).toFixed(2),"B"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-bloomberg-text-dim font-mono",children:[(0,s.jsxs)("div",{children:["NPL: ",(0,s.jsxs)("span",{className:"text-bloomberg-red font-bold",children:[Number(e[2]).toFixed(2),"%"]})]}),(0,s.jsxs)("div",{children:["RSV: ",(0,s.jsxs)("span",{className:"text-bloomberg-amber",children:["$",Number(e[3]).toFixed(2),"B"]})]}),(0,s.jsxs)("div",{className:"col-span-2",children:["Ratio: ",(0,s.jsxs)("span",{className:"text-bloomberg-text",children:[Number(e[4]).toFixed(2),"%"]})]})]})]},t))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900",children:"Rate Shock Stress (100 bps)"}),(0,s.jsx)("div",{className:"space-y-3",children:null===(t=c.rate_shock_stress)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>{g("deposit-table",{product_type:e.product},"".concat(e.product," Deposits - Rate Shock View"))},className:"p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e.product}),(0,s.jsxs)("div",{className:"text-sm text-bloomberg-red font-bold font-mono bloomberg-glow-red",children:["-$",(e.runoff_100bps/1e6).toFixed(1),"M"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-bloomberg-text-dim font-mono",children:[(0,s.jsxs)("div",{children:["BETA: ",(0,s.jsx)("span",{className:"text-bloomberg-text",children:e.beta.toFixed(4)})]}),(0,s.jsxs)("div",{children:["RUN: ",(0,s.jsxs)("span",{className:"text-bloomberg-red",children:[e.runoff_pct.toFixed(2),"%"]})]})]})]},t))}),(0,s.jsxs)("div",{className:"p-4 bg-bloomberg-surface border-2 border-bloomberg-border mt-4",children:[(0,s.jsx)("h4",{className:"font-bold text-bloomberg-orange mb-3 font-mono text-sm tracking-wider",children:"LCR STRESS TEST"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"BASE CASE"}),(0,s.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:[null===(o=c.lcr_stress)||void 0===o?void 0:o.base.ratio.toFixed(2),"%"]}),(0,s.jsx)("div",{className:"text-xs font-bold font-mono mt-1 ".concat((null===(l=c.lcr_stress)||void 0===l?void 0:l.base.status)==="Pass"?"text-bloomberg-green bloomberg-glow-green":"text-bloomberg-red bloomberg-glow-red"),children:null===(a=c.lcr_stress)||void 0===a?void 0:a.base.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mb-1",children:"1.5X STRESS"}),(0,s.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:[null===(n=c.lcr_stress)||void 0===n?void 0:n.stressed.ratio.toFixed(2),"%"]}),(0,s.jsx)("div",{className:"text-xs font-bold font-mono mt-1 ".concat((null===(i=c.lcr_stress)||void 0===i?void 0:i.stressed.status)==="Pass"?"text-bloomberg-green bloomberg-glow-green":"text-bloomberg-red bloomberg-glow-red"),children:null===(d=c.lcr_stress)||void 0===d?void 0:d.stressed.status})]})]})]})]})]}):(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"No risk data available"})}function eg(){let[e,t]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),{navigateTo:a}=L();(0,r.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/data/recent-activity"),o=await e.json();o.success&&t(o.activities||[]),l(!1)}catch(e){console.error("Failed to fetch activity:",e),l(!1)}};return o?(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Loading recent activity..."}):(0,s.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>{a("loan-table",{product_type:e[1]},"".concat(e[1]," Loans"))},className:"flex items-center justify-between p-4 border-2 border-bloomberg-border bg-bloomberg-surface hover:border-bloomberg-orange/70 transition-colors cursor-pointer group",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"font-bold text-bloomberg-orange group-hover:text-bloomberg-amber transition-colors font-mono text-sm",children:e[0]}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:e[1]})]})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-bloomberg-text font-mono text-lg",children:["$",(Number(e[2])/1e3).toFixed(1),"K"]}),(0,s.jsx)("div",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:new Date(e[3]).toLocaleDateString()})]})]},t))})}function eh(){let[e,t]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[m,f]=(0,r.useState)(null),[j,u]=(0,r.useState)(""),{state:p,navigateTo:N}=L();(0,r.useEffect)(()=>{u(new Date().toLocaleTimeString());let e=setInterval(()=>{u(new Date().toLocaleTimeString())},1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{v();let e=setInterval(v,6e4);return()=>clearInterval(e)},[]);let v=async()=>{try{let e=await fetch("/api/data/summary"),o=await e.json();t(o),l(!1)}catch(e){console.error("Failed to fetch summary:",e),l(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-bloomberg-bg",children:[(0,s.jsx)("header",{className:"bloomberg-header sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-bloomberg-orange bloomberg-glow tracking-wide",children:"BANK CFO COMMAND CENTER"}),(0,s.jsx)("p",{className:"text-xs text-bloomberg-text-dim font-mono mt-1",children:"POWERED BY DATABRICKS LAKEHOUSE | REAL-TIME ANALYTICS"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)(A.default,{href:"/assistant",className:"text-sm font-bold text-bloomberg-amber hover:text-bloomberg-orange transition-colors tracking-wide",children:"AI ASSISTANT →"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs font-mono text-bloomberg-text-dim",children:[(0,s.jsx)("span",{children:j||"--:--:--"}),(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-bloomberg-green animate-pulse bloomberg-glow-green"}),(0,s.jsx)("span",{className:"text-bloomberg-green font-bold",children:"LIVE"})]})]})]})})}),(0,s.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[(0,s.jsx)(B,{}),"loan-table"===p.view?(0,s.jsx)(H,{type:"loans",filters:p.filters,onLoanClick:e=>f(e)}):"deposit-table"===p.view?(0,s.jsx)(H,{type:"deposits",filters:p.filters,onLoanClick:e=>f(e)}):"portfolio-loans"===p.view?(0,s.jsx)(eo,{type:"loans"}):"portfolio-deposits"===p.view?(0,s.jsx)(eo,{type:"deposits"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)("div",{onClick:()=>N("loan-table",{},"All Loans"),className:"cursor-pointer",children:(0,s.jsx)(T,{title:"Total Assets",value:(null==e?void 0:e.success)?"$".concat((e.total_assets/1e9).toFixed(1),"B"):"Loading...",change:"+2.1%",trend:"up",icon:(0,s.jsx)(a.Z,{className:"h-5 w-5"}),dataSource:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio (SUM current_balance) + silver_finance.securities (SUM market_value) → agent_tools.get_portfolio_summary()"})}),(0,s.jsx)("div",{onClick:()=>N("loan-table",{},"All Deposits"),className:"cursor-pointer",children:(0,s.jsx)(T,{title:"Total Deposits",value:(null==e?void 0:e.success)?"$".concat((e.deposits/1e9).toFixed(1),"B"):"Loading...",change:"+1.8%",trend:"up",icon:(0,s.jsx)(n.Z,{className:"h-5 w-5"}),dataSource:"Unity Catalog: cfo_banking_demo.bronze_core_banking.deposit_accounts WHERE account_status = 'Active' (SUM current_balance) → agent_tools.get_portfolio_summary()"})}),(0,s.jsx)("div",{onClick:()=>N("loan-table",{},"All Loans"),className:"cursor-pointer",children:(0,s.jsx)(T,{title:"Loans",value:(null==e?void 0:e.success)?"$".concat((e.loans/1e9).toFixed(1),"B"):"Loading...",change:"-12 bps",trend:"down",icon:(0,s.jsx)(i.Z,{className:"h-5 w-5"}),dataSource:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio WHERE is_current = true (SUM current_balance) → agent_tools.get_portfolio_summary()"})}),(0,s.jsx)("div",{onClick:()=>N("loan-table",{},"All Securities"),className:"cursor-pointer",children:(0,s.jsx)(T,{title:"Securities",value:(null==e?void 0:e.success)?"$".concat((e.securities/1e9).toFixed(1),"B"):"Loading...",change:"Compliant",trend:"neutral",icon:(0,s.jsx)(d.Z,{className:"h-5 w-5"}),highlight:!0,dataSource:"Unity Catalog: cfo_banking_demo.silver_finance.securities (SUM market_value) → HQLA eligible securities for regulatory compliance → agent_tools.get_portfolio_summary()"})})]}),(0,s.jsxs)(b,{defaultValue:"portfolio",className:"space-y-6 mb-8",children:[(0,s.jsxs)(x,{children:[(0,s.jsx)(g,{value:"portfolio",children:"Portfolio"}),(0,s.jsx)(g,{value:"risk",children:"Risk Analysis"}),(0,s.jsx)(g,{value:"activity",children:"Recent Activity"}),(0,s.jsx)(g,{value:"deposit-beta",className:"text-bloomberg-orange",children:"Deposit Beta"}),(0,s.jsx)(g,{value:"vintage",className:"text-bloomberg-orange",children:"Vintage Analysis"}),(0,s.jsx)(g,{value:"stress-test",className:"text-bloomberg-orange",children:"CCAR/DFAST"})]}),(0,s.jsx)(h,{value:"portfolio",className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.ll,{children:"Loan Portfolio by Product"}),(0,s.jsx)(em,{source:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio → Aggregated by product_type with current_balance, interest_rate, and cecl_reserve"})]})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(eb,{type:"loans"})})]}),(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.ll,{children:"Deposit Portfolio by Product"}),(0,s.jsx)(em,{source:"Unity Catalog: cfo_banking_demo.bronze_core_banking.deposit_accounts → Aggregated by product_type with current_balance and stated_rate"})]})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(eb,{type:"deposits"})})]})]})}),(0,s.jsx)(h,{value:"risk",className:"space-y-6",children:(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.ll,{children:"Risk Analytics & Stress Testing"}),(0,s.jsx)(em,{source:"Credit Risk: cfo_banking_demo.silver_finance.loan_portfolio (NPL rates, CECL reserves) | Rate Shock: agent_tools.call_deposit_beta_model() with 100 bps stress | LCR: agent_tools.calculate_lcr() with 1.0x and 1.5x multipliers"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Credit risk metrics and rate shock scenarios"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(ex,{})})]})}),(0,s.jsx)(h,{value:"activity",className:"space-y-6",children:(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.ll,{children:"Recent Activity"}),(0,s.jsx)(em,{source:"Unity Catalog: cfo_banking_demo.silver_finance.loan_portfolio → Last 10 loan originations ordered by origination_date DESC"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Latest loan originations and transactions"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(eg,{})})]})}),(0,s.jsx)(h,{value:"deposit-beta",className:"space-y-6",children:(0,s.jsx)(er,{})}),(0,s.jsx)(h,{value:"vintage",className:"space-y-6",children:(0,s.jsx)(ei,{})}),(0,s.jsx)(h,{value:"stress-test",className:"space-y-6",children:(0,s.jsx)(ec,{})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-bold leading-none tracking-wider font-mono uppercase",style:{color:"#ff8c00 !important"},children:"US TREASURY YIELD CURVE"}),(0,s.jsx)(em,{source:"Alpha Vantage API → agent_tools.get_current_treasury_yields() → U.S. Department of Treasury daily rates"})]}),(0,s.jsx)("p",{className:"text-sm font-mono",style:{color:"#999999"},children:"Live market data"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(_,{})})]}),(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-bold leading-none tracking-wider font-mono uppercase",style:{color:"#ff8c00 !important"},children:"30-DAY LIQUIDITY ANALYSIS"}),(0,s.jsx)(em,{source:"Unity Catalog: cfo_banking_demo.bronze_core_banking.deposit_accounts + silver_finance.securities → agent_tools.calculate_lcr()"})]}),(0,s.jsx)("p",{className:"text-sm font-mono",style:{color:"#999999"},children:"LCR components"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsx)(F,{})})]})]})]}),m&&(0,s.jsx)(ee,{loanId:m,open:!!m,onClose:()=>f(null)})]})]})}function ef(){return(0,s.jsx)(D,{children:(0,s.jsx)(eh,{})})}},27815:function(e,t,o){"use strict";o.d(t,{Ol:function(){return n},Zb:function(){return a},aY:function(){return d},ll:function(){return i}});var s=o(3827),r=o(64090),l=o(1657);let a=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-none border-2 border-bloomberg-border bg-bloomberg-surface text-bloomberg-text shadow-xl hover:border-bloomberg-orange/50 transition-colors",o),...r})});a.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6 border-b border-bloomberg-orange/30",o),...r})});n.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg font-bold leading-none tracking-wider text-bloomberg-orange font-mono uppercase",o),...r})});i.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",o),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",o),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:o,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",o),...r})}).displayName="CardFooter"},1657:function(e,t,o){"use strict";o.d(t,{cn:function(){return l}});var s=o(75504),r=o(51367);function l(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[357,792,788,971,69,744],function(){return e(e.s=76234)}),_N_E=e.O()}]);